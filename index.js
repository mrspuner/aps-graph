const t=!1;var e=Array.isArray,n=Array.prototype.indexOf,i=Array.from,r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyDescriptors,a=Object.prototype,l=Array.prototype,u=Object.getPrototypeOf;const h=()=>{};const c=32,f=128,d=256,p=512,g=1024,m=2048,x=4096,v=8192,y=16384,w=65536,b=1<<20,_=Symbol("$state"),k=Symbol("legacy props"),S=Symbol("");function T(t){return t===this.v}function A(t,e){return t!=t?e==e:t!==e||null!==t&&"object"==typeof t||"function"==typeof t}function E(t){return!A(t,this.v)}const N=Symbol();let R=null;function C(t){R=t}function z(t,e=!1,n){R={p:R,c:null,e:null,m:!1,s:t,x:null,l:null}}function M(t){const e=R;if(null!==e){const t=e.e;if(null!==t){var n=$t,i=Ct;e.e=null;try{for(var r=0;r<t.length;r++){var o=t[r];Dt(o.effect),Mt(o.reaction),rt(o.fn)}}finally{Dt(n),Mt(i)}}R=e.p,e.m=!0}return{}}function $(t,e){return{f:0,v:t,reactions:null,equals:T,rv:0,wv:0}}function D(t){return function(t){null!==Ct&&!zt&&2&Ct.f&&(null===Pt?Pt=[t]:Pt.push(t));return t}($(t))}function P(t,e=!1){const n=$(t);return e||(n.equals=E),n}function O(t,e){return null===Ct||zt||!(18&Ct.f)||null!==Pt&&Pt.includes(t)||function(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}(),I(t,e)}function I(t,e){return t.equals(e)||(t.v,t.v=e,t.wv=qt(),L(t,m),null!==$t&&$t.f&g&&!(96&$t.f)&&(null===Lt?function(t){Lt=t}([t]):Lt.push(t))),e}function L(t,e){var n=t.reactions;if(null!==n)for(var i=n.length,r=0;r<i;r++){var o=n[r],s=o.f;s&m||(re(o,e),1280&s&&(2&s?L(o,x):Jt(o)))}}let F=!1;function B(t,n=null,i){if("object"!=typeof t||null===t||_ in t)return t;const r=u(t);if(r!==a&&r!==l)return t;var s,h=new Map,c=e(t),f=$(0);return c&&h.set("length",$(t.length)),new Proxy(t,{defineProperty(t,e,n){"value"in n&&!1!==n.configurable&&!1!==n.enumerable&&!1!==n.writable||function(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}();var i=h.get(e);return void 0===i?(i=$(n.value),h.set(e,i)):O(i,B(n.value,s)),!0},deleteProperty(t,e){var n=h.get(e);if(void 0===n)e in t&&h.set(e,$(N));else{if(c&&"string"==typeof e){var i=h.get("length"),r=Number(e);Number.isInteger(r)&&r<i.v&&O(i,r)}O(n,N),W(f)}return!0},get(e,n,i){if(n===_)return t;var r=h.get(n),a=n in e;if(void 0!==r||a&&!o(e,n)?.writable||(r=$(B(a?e[n]:N,s)),h.set(n,r)),void 0!==r){var l=ee(r);return l===N?void 0:l}return Reflect.get(e,n,i)},getOwnPropertyDescriptor(t,e){var n=Reflect.getOwnPropertyDescriptor(t,e);if(n&&"value"in n){var i=h.get(e);i&&(n.value=ee(i))}else if(void 0===n){var r=h.get(e),o=r?.v;if(void 0!==r&&o!==N)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return n},has(t,e){if(e===_)return!0;var n=h.get(e),i=void 0!==n&&n.v!==N||Reflect.has(t,e);if((void 0!==n||null!==$t&&(!i||o(t,e)?.writable))&&(void 0===n&&(n=$(i?B(t[e],s):N),h.set(e,n)),ee(n)===N))return!1;return i},set(t,e,n,i){var r=h.get(e),a=e in t;if(c&&"length"===e)for(var l=n;l<r.v;l+=1){var u=h.get(l+"");void 0!==u?O(u,N):l in t&&(u=$(N),h.set(l+"",u))}void 0===r?a&&!o(t,e)?.writable||(O(r=$(void 0),B(n,s)),h.set(e,r)):(a=r.v!==N,O(r,B(n,s)));var d=Reflect.getOwnPropertyDescriptor(t,e);if(d?.set&&d.set.call(i,n),!a){if(c&&"string"==typeof e){var p=h.get("length"),g=Number(e);Number.isInteger(g)&&g>=p.v&&O(p,g+1)}W(f)}return!0},ownKeys(t){ee(f);var e=Reflect.ownKeys(t).filter((t=>{var e=h.get(t);return void 0===e||e.v!==N}));for(var[n,i]of h)i.v===N||n in t||e.push(n);return e},setPrototypeOf(){!function(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}()}})}function W(t,e=1){O(t,t.v+e)}var q,j,H,U;function Y(t=""){return document.createTextNode(t)}function G(t){return H.call(t)}function X(t){return U.call(t)}function Z(t,e){return G(t)}function V(t,e){var n=G(t);return n instanceof Comment&&""===n.data?X(n):n}function Q(t,e=1,n=!1){let i=t;for(;e--;)i=X(i);return i}function K(t){var e=2050,n=null!==Ct&&2&Ct.f?Ct:null;null===$t||null!==n&&n.f&d?e|=d:$t.f|=b;return{ctx:R,deps:null,effects:null,equals:T,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:n??$t}}function J(t){var e=t.effects;if(null!==e){t.effects=null;for(var n=0;n<e.length;n+=1)ht(e[n])}}function tt(t){var e=function(t){var e,n=$t;Dt(function(t){for(var e=t.parent;null!==e;){if(!(2&e.f))return e;e=e.parent}return null}(t));try{J(t),e=Yt(t)}finally{Dt(n)}return e}(t);re(t,(Wt||t.f&d)&&null!==t.deps?x:g),t.equals(e)||(t.v=e,t.wv=qt())}function et(t){null===$t&&null===Ct&&function(){throw new Error("https://svelte.dev/e/effect_orphan")}(),null!==Ct&&Ct.f&d&&null===$t&&function(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}(),Tt&&function(){throw new Error("https://svelte.dev/e/effect_in_teardown")}()}function nt(t,e,n,i=!0){var r=!!(64&t),o=$t,s={ctx:R,deps:null,nodes_start:null,nodes_end:null,f:t|m,first:null,fn:e,last:null,next:null,parent:r?null:o,prev:null,teardown:null,transitions:null,wv:0};if(n){var a=St;try{At(!0),Zt(s),s.f|=32768}catch(t){throw ht(s),t}finally{At(a)}}else null!==e&&Jt(s);if(!(n&&null===s.deps&&null===s.first&&null===s.nodes_start&&null===s.teardown&&!(1048704&s.f))&&!r&&i&&(null!==o&&function(t,e){var n=e.last;null===n?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}(s,o),null!==Ct&&2&Ct.f)){var l=Ct;(l.effects??=[]).push(s)}return s}function it(t){if(et(),!(null!==$t&&!!($t.f&c)&&null!==R&&!R.m))return rt(t);var e=R;(e.e??=[]).push({fn:t,effect:$t,reaction:Ct})}function rt(t){return nt(4,t,!1)}function ot(t,e=[],n=K){const i=e.map(n);return st((()=>t(...i.map(ee))))}function st(t,e=0){return nt(24|e,t,!0)}function at(t,e=!0){return nt(40,t,!0,e)}function lt(t){var e=t.teardown;if(null!==e){const t=Tt,n=Ct;Et(!0),Mt(null);try{e.call(null)}finally{Et(t),Mt(n)}}}function ut(t,e=!1){var n=t.first;for(t.first=t.last=null;null!==n;){var i=n.next;ht(n,e),n=i}}function ht(t,e=!0){var n=!1;if((e||524288&t.f)&&null!==t.nodes_start){for(var i=t.nodes_start,r=t.nodes_end;null!==i;){var o=i===r?null:X(i);i.remove(),i=o}n=!0}ut(t,e&&!n),Xt(t,0),re(t,y);var s=t.transitions;if(null!==s)for(const t of s)t.stop();lt(t);var a=t.parent;null!==a&&null!==a.first&&ct(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function ct(t){var e=t.parent,n=t.prev,i=t.next;null!==n&&(n.next=i),null!==i&&(i.prev=n),null!==e&&(e.first===t&&(e.first=i),e.last===t&&(e.last=n))}function ft(t,e){var n=[];pt(t,n,!0),dt(n,(()=>{ht(t),e&&e()}))}function dt(t,e){var n=t.length;if(n>0){var i=()=>--n||e();for(var r of t)r.out(i)}else e()}function pt(t,e,n){if(!(t.f&v)){if(t.f^=v,null!==t.transitions)for(const i of t.transitions)(i.is_global||n)&&e.push(i);for(var i=t.first;null!==i;){var r=i.next;pt(i,e,!!(!!(i.f&w)||!!(i.f&c))&&n),i=r}}}function gt(t){mt(t,!0)}function mt(t,e){if(t.f&v){t.f^=v,t.f&g||(t.f^=g),jt(t)&&(re(t,m),Jt(t));for(var n=t.first;null!==n;){var i=n.next;mt(n,!!(!!(n.f&w)||!!(n.f&c))&&e),n=i}if(null!==t.transitions)for(const n of t.transitions)(n.is_global||e)&&n.in()}}let xt=!1,vt=[];function yt(){xt=!1;const t=vt.slice();vt=[],function(t){for(var e=0;e<t.length;e++)t[e]()}(t)}function wt(t){xt||(xt=!0,queueMicrotask(yt)),vt.push(t)}let bt=!1,_t=!1,kt=null,St=!1,Tt=!1;function At(t){St=t}function Et(t){Tt=t}let Nt=[],Rt=0,Ct=null,zt=!1;function Mt(t){Ct=t}let $t=null;function Dt(t){$t=t}let Pt=null;let Ot=null,It=0,Lt=null;let Ft=1,Bt=0,Wt=!1;function qt(){return++Ft}function jt(t){var e=t.f;if(e&m)return!0;if(e&x){var n=t.deps,i=!!(e&d);if(null!==n){var r,o,s=!!(e&p),a=i&&null!==$t&&!Wt,l=n.length;if(s||a){var u=t,h=u.parent;for(r=0;r<l;r++)o=n[r],!s&&o?.reactions?.includes(u)||(o.reactions??=[]).push(u);s&&(u.f^=p),!a||null===h||h.f&d||(u.f^=d)}for(r=0;r<l;r++)if(jt(o=n[r])&&tt(o),o.wv>t.wv)return!0}i&&(null===$t||Wt)||re(t,g)}return!1}function Ht(t,e,n,i){if(bt){if(null===n&&(bt=!1),function(t){return!(t.f&y||null!==t.parent&&t.parent.f&f)}(e))throw t}else null!==n&&(bt=!0),function(t,e){for(var n=e;null!==n;){if(n.f&f)try{return void n.fn(t)}catch{n.f^=f}n=n.parent}throw bt=!1,t}(t,e)}function Ut(t,e,n=!0){var i=t.reactions;if(null!==i)for(var r=0;r<i.length;r++){var o=i[r];2&o.f?Ut(o,e,!1):e===o&&(n?re(o,m):o.f&g&&re(o,x),Jt(o))}}function Yt(t){var e=Ot,n=It,i=Lt,r=Ct,o=Wt,s=Pt,a=R,l=zt,u=t.f;Ot=null,It=0,Lt=null,Ct=96&u?null:t,Wt=!!(u&d)&&(!St||null===r||l),Pt=null,C(t.ctx),zt=!1,Bt++;try{var h=(0,t.fn)(),c=t.deps;if(null!==Ot){var f;if(Xt(t,It),null!==c&&It>0)for(c.length=It+Ot.length,f=0;f<Ot.length;f++)c[It+f]=Ot[f];else t.deps=c=Ot;if(!Wt)for(f=It;f<c.length;f++)(c[f].reactions??=[]).push(t)}else null!==c&&It<c.length&&(Xt(t,It),c.length=It);if(!(null===Lt||zt||null===c||6146&t.f))for(f=0;f<Lt.length;f++)Ut(Lt[f],t);return null!==r&&Bt++,h}finally{Ot=e,It=n,Lt=i,Ct=r,Wt=o,Pt=s,C(a),zt=l}}function Gt(t,e){let i=e.reactions;if(null!==i){var r=n.call(i,t);if(-1!==r){var o=i.length-1;0===o?i=e.reactions=null:(i[r]=i[o],i.pop())}}null===i&&2&e.f&&(null===Ot||!Ot.includes(e))&&(re(e,x),768&e.f||(e.f^=p),J(e),Xt(e,0))}function Xt(t,e){var n=t.deps;if(null!==n)for(var i=e;i<n.length;i++)Gt(t,n[i])}function Zt(e){var n=e.f;if(!(n&y)){re(e,g);var i=$t,r=R;$t=e;try{16&n?function(t){for(var e=t.first;null!==e;){var n=e.next;e.f&c||ht(e),e=n}}(e):ut(e),lt(e);var o=Yt(e);e.teardown="function"==typeof o?o:null,e.wv=Ft;e.deps;t}catch(t){Ht(t,e,i,r||e.ctx)}finally{$t=i}}}function Vt(){if(Rt>1e3){Rt=0;try{!function(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}()}catch(t){if(null===kt)throw t;Ht(t,kt,null)}}Rt++}function Qt(t){var e=t.length;if(0!==e)for(var n=0;n<e;n++){var i=t[n];if(!(24576&i.f))try{jt(i)&&(Zt(i),null===i.deps&&null===i.first&&null===i.nodes_start&&(null===i.teardown?ct(i):i.fn=null))}catch(t){Ht(t,i,null,i.ctx)}}}function Kt(){if(_t=!1,Rt>1001)return;const t=Nt;Nt=[],function(t){var e=t.length;if(0!==e){Vt();var n=St;St=!0;try{for(var i=0;i<e;i++){var r=t[i];r.f&g||(r.f^=g),Qt(te(r))}}finally{St=n}}}(t),_t||(Rt=0,kt=null)}function Jt(t){_t||(_t=!0,queueMicrotask(Kt)),kt=t;for(var e=t;null!==e.parent;){var n=(e=e.parent).f;if(96&n){if(!(n&g))return;e.f^=g}}Nt.push(e)}function te(t){var e=[],n=t.first;t:for(;null!==n;){var i=n.f,r=!!(i&c),o=r&&!!(i&g),s=n.next;if(!(o||i&v)){if(4&i)e.push(n);else if(r)n.f^=g;else{var a=Ct;try{Ct=n,jt(n)&&Zt(n)}catch(t){Ht(t,n,null,n.ctx)}finally{Ct=a}}var l=n.first;if(null!==l){n=l;continue}}if(null===s){let e=n.parent;for(;null!==e;){if(t===e)break t;var u=e.next;if(null!==u){n=u;continue t}e=e.parent}}n=s}return e}function ee(t){var e=!!(2&t.f);if(null===Ct||zt){if(e&&null===t.deps&&null===t.effects){var n=t,i=n.parent;null===i||i.f&d||(n.f^=d)}}else{null!==Pt&&Pt.includes(t)&&function(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}();var r=Ct.deps;t.rv<Bt&&(t.rv=Bt,null===Ot&&null!==r&&r[It]===t?It++:null===Ot?Ot=[t]:Wt&&Ot.includes(t)||Ot.push(t))}return e&&jt(n=t)&&tt(n),t.v}function ne(t){var e=zt;try{return zt=!0,t()}finally{zt=e}}const ie=-7169;function re(t,e){t.f=t.f&ie|e}function oe(t){return t.endsWith("capture")&&"gotpointercapture"!==t&&"lostpointercapture"!==t}const se=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function ae(t){return se.includes(t)}const le={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function ue(t){return t=t.toLowerCase(),le[t]??t}const he=["touchstart","touchmove"];function ce(t){return he.includes(t)}function fe(t,e){if(e){const e=document.body;t.autofocus=!0,wt((()=>{document.activeElement===e&&t.focus()}))}}const de=new Set,pe=new Set;function ge(t,e,n,i={}){function r(t){if(i.capture||xe.call(e,t),!t.cancelBubble)return function(t){var e=Ct,n=$t;Mt(null),Dt(null);try{return t()}finally{Mt(e),Dt(n)}}((()=>n?.call(this,t)))}return t.startsWith("pointer")||t.startsWith("touch")||"wheel"===t?wt((()=>{e.addEventListener(t,r,i)})):e.addEventListener(t,r,i),r}function me(t){for(var e=0;e<t.length;e++)de.add(t[e]);for(var n of pe)n(t)}function xe(t){var n=this,i=n.ownerDocument,o=t.type,s=t.composedPath?.()||[],a=s[0]||t.target,l=0,u=t.__root;if(u){var h=s.indexOf(u);if(-1!==h&&(n===document||n===window))return void(t.__root=n);var c=s.indexOf(n);if(-1===c)return;h<=c&&(l=h)}if((a=s[l]||t.target)!==n){r(t,"currentTarget",{configurable:!0,get:()=>a||i});var f=Ct,d=$t;Mt(null),Dt(null);try{for(var p,g=[];null!==a;){var m=a.assignedSlot||a.parentNode||a.host||null;try{var x=a["__"+o];if(void 0!==x&&!a.disabled)if(e(x)){var[v,...y]=x;v.apply(a,[t,...y])}else x.call(a,t)}catch(t){p?g.push(t):p=t}if(t.cancelBubble||m===n||null===m)break;a=m}if(p){for(let t of g)queueMicrotask((()=>{throw t}));throw p}}finally{t.__root=n,delete t.currentTarget,Mt(f),Dt(d)}}}function ve(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function ye(t,e){var n=$t;null===n.nodes_start&&(n.nodes_start=t,n.nodes_end=e)}function we(t,e){var n,i=!!(1&e),r=!!(2&e),o=!t.startsWith("<!>");return()=>{void 0===n&&(n=ve(o?t:"<!>"+t),i||(n=G(n)));var e=r||j?document.importNode(n,!0):n.cloneNode(!0);i?ye(G(e),e.lastChild):ye(e,e);return e}}function be(){var t=document.createDocumentFragment(),e=document.createComment(""),n=Y();return t.append(e,n),ye(e,n),t}function _e(t,e){null!==t&&t.before(e)}function ke(t,e){var n=null==e?"":"object"==typeof e?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function Se(t,e){return function(t,{target:e,anchor:n,props:r={},events:s,context:a,intro:l=!0}){!function(){if(void 0===q){q=window,j=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype;H=o(e,"firstChild").get,U=o(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}();var u=new Set,h=t=>{for(var n=0;n<t.length;n++){var i=t[n];if(!u.has(i)){u.add(i);var r=ce(i);e.addEventListener(i,xe,{passive:r});var o=Te.get(i);void 0===o?(document.addEventListener(i,xe,{passive:r}),Te.set(i,1)):Te.set(i,o+1)}}};h(i(de)),pe.add(h);var c=void 0,f=function(t){const e=nt(64,t,!0);return(t={})=>new Promise((n=>{t.outro?ft(e,(()=>{ht(e),n(void 0)})):(ht(e),n(void 0))}))}((()=>{var i=n??e.appendChild(Y());return at((()=>{a&&(z({}),R.c=a);s&&(r.$$events=s),c=t(i,r)||{},a&&M()})),()=>{for(var t of u){e.removeEventListener(t,xe);var r=Te.get(t);0==--r?(document.removeEventListener(t,xe),Te.delete(t)):Te.set(t,r)}pe.delete(h),i!==n&&i.parentNode?.removeChild(i)}}));return Ae.set(c,f),c}(t,e)}const Te=new Map;let Ae=new WeakMap;function Ee(t,e,n=!1){var i=t,r=null,o=null,s=N,a=!1;const l=(t,e=!0)=>{a=!0,u(e,t)},u=(t,e)=>{s!==(s=t)&&(s?(r?gt(r):e&&(r=at((()=>e(i)))),o&&ft(o,(()=>{o=null}))):(o?gt(o):e&&(o=at((()=>e(i)))),r&&ft(r,(()=>{r=null}))))};st((()=>{a=!1,e(l),a||u(null,null)}),n?w:0)}function Ne(t,n,r,o,s,a=null){var l=t,u={flags:n,items:new Map,first:null},h=null,c=!1,f=function(t){const e=K(t);return e.equals=E,e}((()=>{var t=r();return e(t)?t:null==t?[]:i(t)}));st((()=>{var t=ee(f),e=t.length;c&&0===e||(c=0===e,function(t,e,n,r,o,s,a){var l,u,h,c,f,d=t.length,p=e.items,g=e.first,m=g,x=null,y=[],w=[];for(f=0;f<d;f+=1)if(h=s(u=t[f],f),void 0!==(c=p.get(h))){if(Re(c,u,f),c.e.f&v&&gt(c.e),c!==m){if(void 0!==l&&l.has(c)){if(y.length<w.length){var b,_=w[0];x=_.prev;var k=y[0],S=y[y.length-1];for(b=0;b<y.length;b+=1)ze(y[b],_,n);for(b=0;b<w.length;b+=1)l.delete(w[b]);Me(e,k.prev,S.next),Me(e,x,k),Me(e,S,_),m=_,x=S,f-=1,y=[],w=[]}else l.delete(c),ze(c,m,n),Me(e,c.prev,c.next),Me(e,c,null===x?e.first:x.next),Me(e,x,c),x=c;continue}for(y=[],w=[];null!==m&&m.k!==h;)m.e.f&v||(l??=new Set).add(m),w.push(m),m=m.next;if(null===m)continue;c=m}y.push(c),x=c,m=c.next}else{x=Ce(m?m.e.nodes_start:n,e,x,null===x?e.first:x.next,u,h,f,r,o,a),p.set(h,x),y=[],w=[],m=x.next}if(null!==m||void 0!==l){for(var T=void 0===l?[]:i(l);null!==m;)m.e.f&v||T.push(m),m=m.next;if(T.length>0)!function(t,e,n,i){for(var r=[],o=e.length,s=0;s<o;s++)pt(e[s].e,r,!0);var a=o>0&&0===r.length&&null!==n;if(a){var l=n.parentNode;l.textContent="",l.append(n),i.clear(),Me(t,e[0].prev,e[o-1].next)}dt(r,(()=>{for(var n=0;n<o;n++){var r=e[n];a||(i.delete(r.k),Me(t,r.prev,r.next)),ht(r.e,!a)}}))}(e,T,null,p)}$t.first=e.first&&e.first.e,$t.last=x&&x.e}(t,u,l,s,n,o,r),null!==a&&(0===e?h?gt(h):h=at((()=>a(l))):null!==h&&ft(h,(()=>{h=null}))),ee(f))}))}function Re(t,e,n,i){I(t.v,e),t.i=n}function Ce(t,e,n,i,r,o,s,a,l,u){var h=!!(1&l)?!(16&l)?P(r):$(r):r,c=2&l?$(s):s,f={i:c,v:h,k:o,a:null,e:null,prev:n,next:i};try{return f.e=at((()=>a(t,h,c,u)),F),f.e.prev=n&&n.e,f.e.next=i&&i.e,null===n?e.first=f:(n.next=f,n.e.next=f.e),null!==i&&(i.prev=f,i.e.prev=f.e),f}finally{}}function ze(t,e,n){for(var i=t.next?t.next.e.nodes_start:n,r=e?e.e.nodes_start:n,o=t.e.nodes_start;o!==i;){var s=X(o);r.before(o),o=s}}function Me(t,e,n){null===e?t.first=n:(e.next=n,e.e.next=n&&n.e),null!==n&&(n.prev=e,n.e.prev=e&&e.e)}function $e(t){var e,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=$e(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function De(t){return"object"==typeof t?function(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=$e(t))&&(i&&(i+=" "),i+=e);return i}(t):t??""}function Pe(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function Oe(t,e,n,i){var r=t.__attributes??={};r[e]!==(r[e]=n)&&("style"===e&&"__styles"in t&&(t.__styles={}),"loading"===e&&(t[S]=n),null==n?t.removeAttribute(e):"string"!=typeof n&&Le(t).includes(e)?t[e]=n:t.setAttribute(e,n))}var Ie=new Map;function Le(t){var e,n=Ie.get(t.nodeName);if(n)return n;Ie.set(t.nodeName,n=[]);for(var i=t,r=Element.prototype;r!==i;){for(var o in e=s(i))e[o].set&&n.push(o);i=u(i)}return n}function Fe(t,e,n){var i=t.__className,r=Be(e);i!==r&&(null==e?t.removeAttribute("class"):t.className=r,t.__className=r)}function Be(t,e){return(null==t?"":t)+""}function We(t,e,n,i){var r=t.__styles??={};r[e]!==n&&(r[e]=n,null==n?t.style.removeProperty(e):t.style.setProperty(e,n,""))}function qe(t,e){return t===e||t?.[_]===e}function je(t={},e,n,i){return rt((()=>{var i,r;return nt(8,(()=>{i=r,r=[],ne((()=>{t!==n(...r)&&(e(t,...r),i&&qe(n(...i),t)&&e(null,...i))}))}),!0),()=>{wt((()=>{r&&qe(n(...r),t)&&e(null,...r)}))}})),t}function He(t,e,n){if(null==t)return e(void 0),h;const i=ne((()=>t.subscribe(e,n)));return i.unsubscribe?()=>i.unsubscribe():i}const Ue=[];function Ye(t,e=h){let n=null;const i=new Set;function r(e){if(A(t,e)&&(t=e,n)){const e=!Ue.length;for(const e of i)e[1](),Ue.push(e,t);if(e){for(let t=0;t<Ue.length;t+=2)Ue[t][0](Ue[t+1]);Ue.length=0}}}function o(e){r(e(t))}return{set:r,update:o,subscribe:function(s,a=h){const l=[s,a];return i.add(l),1===i.size&&(n=e(r,o)||h),s(t),()=>{i.delete(l),0===i.size&&n&&(n(),n=null)}}}}function Ge(t){let e;return He(t,(t=>e=t))(),e}let Xe=!1,Ze=Symbol();function Ve(t,e,n){const i=n[e]??={store:null,source:P(void 0),unsubscribe:h};if(i.store!==t&&!(Ze in n))if(i.unsubscribe(),i.store=t??null,null==t)i.source.v=void 0,i.unsubscribe=h;else{var r=!0;i.unsubscribe=He(t,(t=>{r?i.source.v=t:O(i.source,t)})),r=!1}return t&&Ze in n?Ge(t):ee(i.source)}function Qe(){const t={};return[t,function(){!function(t){const e=nt(8,null,!1);re(e,g),e.teardown=t}((()=>{for(var e in t){t[e].unsubscribe()}r(t,Ze,{enumerable:!1,value:!0})}))}]}const Ke={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set:(t,e)=>!1,getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e))return e in t.props?{enumerable:!0,configurable:!0,value:t.props[e]}:void 0},has:(t,e)=>!t.exclude.includes(e)&&e in t.props,ownKeys:t=>Reflect.ownKeys(t.props).filter((e=>!t.exclude.includes(e)))};function Je(t,e,n,i){var r,s=!!(1&n),a=!!(8&n),l=!!(16&n),u=!1;a?[r,u]=function(t){var e=Xe;try{return Xe=!1,[t(),Xe]}finally{Xe=e}}((()=>t[e])):r=t[e];var h,c=_ in t||k in t,f=a&&(o(t,e)?.set??(c&&e in t&&(n=>t[e]=n)))||void 0,d=i,p=!0,g=!1,m=()=>(g=!0,p&&(p=!1,d=l?ne(i):i),d);if(void 0===r&&void 0!==i&&(f&&function(){throw new Error("https://svelte.dev/e/props_invalid_value")}(),r=m(),f&&f(r)),h=()=>{var n=t[e];return void 0===n?m():(p=!0,g=!1,n)},!(4&n))return h;if(f){var x=t.$$legacy;return function(t,e){return arguments.length>0?((!e||x||u)&&f(e?h():t),t):h()}}var v=!1,y=P(r),w=K((()=>{var t=h(),e=ee(y);return v?(v=!1,e):y.v=t}));return s||(w.equals=E),function(t,e){if(arguments.length>0){const n=e?ee(w):a?B(t):t;return w.equals(n)||(v=!0,O(y,n),g&&void 0!==d&&(d=n),ne((()=>ee(w)))),t}return ee(w)}}"undefined"!=typeof window&&(window.__svelte||={v:new Set}).v.add("5");const tn="HEX",en="RGB",nn="RGBA",rn="HSL";function on(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function sn(t,e=on){let n,i=!1;if(1===e.length){let r;for(const o of t){const t=e(o);(i?on(t,r)>0:0===on(t,t))&&(n=o,r=t,i=!0)}}else for(const r of t)(i?e(r,n)>0:0===e(r,r))&&(n=r,i=!0);return n}var an={value:()=>{}};function ln(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new un(i)}function un(t){this._=t}function hn(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function cn(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=an,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}un.prototype=ln.prototype={constructor:un,on:function(t,e){var n,i,r=this._,o=(i=r,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<a;)if(n=(t=o[s]).type)r[n]=cn(r[n],t.name,e);else if(null==e)for(n in r)r[n]=cn(r[n],t.name,null);return this}for(;++s<a;)if((n=(t=o[s]).type)&&(n=hn(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new un(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};var fn="http://www.w3.org/1999/xhtml";const dn={svg:"http://www.w3.org/2000/svg",xhtml:fn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pn(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),dn.hasOwnProperty(e)?{space:dn[e],local:t}:t}function gn(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===fn&&e.documentElement.namespaceURI===fn?e.createElement(t):e.createElementNS(n,t)}}function mn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function xn(t){var e=pn(t);return(e.local?mn:gn)(e)}function vn(){}function yn(t){return null==t?vn:function(){return this.querySelector(t)}}function wn(){return[]}function bn(t){return null==t?wn:function(){return this.querySelectorAll(t)}}function _n(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function kn(t){return function(){return this.matches(t)}}function Sn(t){return function(e){return e.matches(t)}}var Tn=Array.prototype.find;function An(){return this.firstElementChild}var En=Array.prototype.filter;function Nn(){return Array.from(this.children)}function Rn(t){return new Array(t.length)}function Cn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function zn(t,e,n,i,r,o){for(var s,a=0,l=e.length,u=o.length;a<u;++a)(s=e[a])?(s.__data__=o[a],i[a]=s):n[a]=new Cn(t,o[a]);for(;a<l;++a)(s=e[a])&&(r[a]=s)}function Mn(t,e,n,i,r,o,s){var a,l,u,h=new Map,c=e.length,f=o.length,d=new Array(c);for(a=0;a<c;++a)(l=e[a])&&(d[a]=u=s.call(l,l.__data__,a,e)+"",h.has(u)?r[a]=l:h.set(u,l));for(a=0;a<f;++a)u=s.call(t,o[a],a,o)+"",(l=h.get(u))?(i[a]=l,l.__data__=o[a],h.delete(u)):n[a]=new Cn(t,o[a]);for(a=0;a<c;++a)(l=e[a])&&h.get(d[a])===l&&(r[a]=l)}function $n(t){return t.__data__}function Dn(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Pn(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function On(t){return function(){this.removeAttribute(t)}}function In(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ln(t,e){return function(){this.setAttribute(t,e)}}function Fn(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Bn(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Wn(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function qn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function jn(t){return function(){this.style.removeProperty(t)}}function Hn(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Un(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Yn(t,e){return t.style.getPropertyValue(e)||qn(t).getComputedStyle(t,null).getPropertyValue(e)}function Gn(t){return function(){delete this[t]}}function Xn(t,e){return function(){this[t]=e}}function Zn(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Vn(t){return t.trim().split(/^|\s+/)}function Qn(t){return t.classList||new Kn(t)}function Kn(t){this._node=t,this._names=Vn(t.getAttribute("class")||"")}function Jn(t,e){for(var n=Qn(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function ti(t,e){for(var n=Qn(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function ei(t){return function(){Jn(this,t)}}function ni(t){return function(){ti(this,t)}}function ii(t,e){return function(){(e.apply(this,arguments)?Jn:ti)(this,t)}}function ri(){this.textContent=""}function oi(t){return function(){this.textContent=t}}function si(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ai(){this.innerHTML=""}function li(t){return function(){this.innerHTML=t}}function ui(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function hi(){this.nextSibling&&this.parentNode.appendChild(this)}function ci(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function fi(){return null}function di(){var t=this.parentNode;t&&t.removeChild(this)}function pi(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function gi(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function mi(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function xi(t,e,n){return function(){var i,r=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=e);this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function vi(t,e,n){var i=qn(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function yi(t,e){return function(){return vi(this,t,e)}}function wi(t,e){return function(){return vi(this,t,e.apply(this,arguments))}}Cn.prototype={constructor:Cn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Kn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var bi=[null];function _i(t,e){this._groups=t,this._parents=e}function ki(){return new _i([[document.documentElement]],bi)}function Si(t){return"string"==typeof t?new _i([[document.querySelector(t)]],[document.documentElement]):new _i([[t]],bi)}function Ti(t){return Si(xn(t).call(document.documentElement))}function Ai(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}_i.prototype=ki.prototype={constructor:_i,select:function(t){"function"!=typeof t&&(t=yn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s,a=e[r],l=a.length,u=i[r]=new Array(l),h=0;h<l;++h)(o=a[h])&&(s=t.call(o,o.__data__,h,a))&&("__data__"in o&&(s.__data__=o.__data__),u[h]=s);return new _i(i,this._parents)},selectAll:function(t){t="function"==typeof t?_n(t):bn(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s,a=e[o],l=a.length,u=0;u<l;++u)(s=a[u])&&(i.push(t.call(s,s.__data__,u,a)),r.push(s));return new _i(i,r)},selectChild:function(t){return this.select(null==t?An:function(t){return function(){return Tn.call(this.children,t)}}("function"==typeof t?t:Sn(t)))},selectChildren:function(t){return this.selectAll(null==t?Nn:function(t){return function(){return En.call(this.children,t)}}("function"==typeof t?t:Sn(t)))},filter:function(t){"function"!=typeof t&&(t=kn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,l=i[r]=[],u=0;u<a;++u)(o=s[u])&&t.call(o,o.__data__,u,s)&&l.push(o);return new _i(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,$n);var n=e?Mn:zn,i=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var h=i[u],c=r[u],f=c.length,d=Dn(t.call(h,h&&h.__data__,u,i)),p=d.length,g=a[u]=new Array(p),m=s[u]=new Array(p);n(h,c,g,m,l[u]=new Array(f),d,e);for(var x,v,y=0,w=0;y<p;++y)if(x=g[y]){for(y>=w&&(w=y+1);!(v=m[w])&&++w<p;);x._next=v||null}}return(s=new _i(s,i))._enter=a,s._exit=l,s},enter:function(){return new _i(this._enter||this._groups.map(Rn),this._parents)},exit:function(){return new _i(this._exit||this._groups.map(Rn),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,o=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var u,h=n[l],c=i[l],f=h.length,d=a[l]=new Array(f),p=0;p<f;++p)(u=h[p]||c[p])&&(d[p]=u);for(;l<r;++l)a[l]=n[l];return new _i(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Pn);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s,a=n[o],l=a.length,u=r[o]=new Array(l),h=0;h<l;++h)(s=a[h])&&(u[h]=s);u.sort(e)}return new _i(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],s=0,a=o.length;s<a;++s)(r=o[s])&&t.call(r,r.__data__,s,o);return this},attr:function(t,e){var n=pn(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?In:On:"function"==typeof e?n.local?Wn:Bn:n.local?Fn:Ln)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?jn:"function"==typeof e?Un:Hn)(t,e,null==n?"":n)):Yn(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Gn:"function"==typeof e?Zn:Xn)(t,e)):this.node()[t]},classed:function(t,e){var n=Vn(t+"");if(arguments.length<2){for(var i=Qn(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?ii:e?ei:ni)(n,e))},text:function(t){return arguments.length?this.each(null==t?ri:("function"==typeof t?si:oi)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ai:("function"==typeof t?ui:li)(t)):this.node().innerHTML},raise:function(){return this.each(hi)},lower:function(){return this.each(ci)},append:function(t){var e="function"==typeof t?t:xn(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:xn(t),i=null==e?fi:"function"==typeof e?e:yn(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(di)},clone:function(t){return this.select(t?gi:pi)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?xi:mi,i=0;i<s;++i)this.each(a(o[i],e,n));return this}var a=this.node().__on;if(a)for(var l,u=0,h=a.length;u<h;++u)for(i=0,l=a[u];i<s;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?wi:yi)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],o=0,s=r.length;o<s;++o)(i=r[o])&&(yield i)}};const Ei={passive:!1},Ni={capture:!0,passive:!1};function Ri(t){t.stopImmediatePropagation()}function Ci(t){t.preventDefault(),t.stopImmediatePropagation()}function zi(t){var e=t.document.documentElement,n=Si(t).on("dragstart.drag",Ci,Ni);"onselectstart"in e?n.on("selectstart.drag",Ci,Ni):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Mi(t,e){var n=t.document.documentElement,i=Si(t).on("dragstart.drag",null);e&&(i.on("click.drag",Ci,Ni),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const $i=t=>()=>t;function Di(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:l,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}function Pi(t){return!t.ctrlKey&&!t.button}function Oi(){return this.parentNode}function Ii(t,e){return null==e?{x:t.x,y:t.y}:e}function Li(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fi(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,o,s,a,l,u,h,c,f,d=t._root,p={data:i},g=t._x0,m=t._y0,x=t._x1,v=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((u=e>=(o=(g+x)/2))?g=o:x=o,(h=n>=(s=(m+v)/2))?m=s:v=s,r=d,!(d=d[c=h<<1|u]))return r[c]=p,t;if(a=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===a&&n===l)return p.next=d,r?r[c]=p:t._root=p,t;do{r=r?r[c]=new Array(4):t._root=new Array(4),(u=e>=(o=(g+x)/2))?g=o:x=o,(h=n>=(s=(m+v)/2))?m=s:v=s}while((c=h<<1|u)==(f=(l>=s)<<1|a>=o));return r[f]=d,r[c]=p,t}function Bi(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function Wi(t){return t[0]}function qi(t){return t[1]}function ji(t,e,n){var i=new Hi(null==e?Wi:e,null==n?qi:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function Hi(t,e,n,i,r,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function Ui(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}Di.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Yi=ji.prototype=Hi.prototype;function Gi(t){return function(){return t}}function Xi(t){return 1e-6*(t()-.5)}function Zi(t){return t.x+t.vx}function Vi(t){return t.y+t.vy}function Qi(t){return t.index}function Ki(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Ji(t){var e,n,i,r,o,s,a=Qi,l=function(t){return 1/Math.min(r[t.source.index],r[t.target.index])},u=Gi(30),h=1;function c(i){for(var r=0,a=t.length;r<h;++r)for(var l,u,c,f,d,p,g,m=0;m<a;++m)u=(l=t[m]).source,f=(c=l.target).x+c.vx-u.x-u.vx||Xi(s),d=c.y+c.vy-u.y-u.vy||Xi(s),f*=p=((p=Math.sqrt(f*f+d*d))-n[m])/p*i*e[m],d*=p,c.vx-=f*(g=o[m]),c.vy-=d*g,u.vx+=f*(g=1-g),u.vy+=d*g}function f(){if(i){var s,l,u=i.length,h=t.length,c=new Map(i.map(((t,e)=>[a(t,e,i),t])));for(s=0,r=new Array(u);s<h;++s)(l=t[s]).index=s,"object"!=typeof l.source&&(l.source=Ki(c,l.source)),"object"!=typeof l.target&&(l.target=Ki(c,l.target)),r[l.source.index]=(r[l.source.index]||0)+1,r[l.target.index]=(r[l.target.index]||0)+1;for(s=0,o=new Array(h);s<h;++s)l=t[s],o[s]=r[l.source.index]/(r[l.source.index]+r[l.target.index]);e=new Array(h),d(),n=new Array(h),p()}}function d(){if(i)for(var n=0,r=t.length;n<r;++n)e[n]=+l(t[n],n,t)}function p(){if(i)for(var e=0,r=t.length;e<r;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t,e){i=t,s=e,f()},c.links=function(e){return arguments.length?(t=e,f(),c):t},c.id=function(t){return arguments.length?(a=t,c):a},c.iterations=function(t){return arguments.length?(h=+t,c):h},c.strength=function(t){return arguments.length?(l="function"==typeof t?t:Gi(+t),d(),c):l},c.distance=function(t){return arguments.length?(u="function"==typeof t?t:Gi(+t),p(),c):u},c}Yi.copy=function(){var t,e,n=new Hi(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=Ui(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=Ui(e));return n},Yi.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Fi(this.cover(e,n),e,n,t)},Yi.addAll=function(t){var e,n,i,r,o=t.length,s=new Array(o),a=new Array(o),l=1/0,u=1/0,h=-1/0,c=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(s[n]=i,a[n]=r,i<l&&(l=i),i>h&&(h=i),r<u&&(u=r),r>c&&(c=r));if(l>h||u>c)return this;for(this.cover(l,u).cover(h,c),n=0;n<o;++n)Fi(this,s[n],a[n],t[n]);return this},Yi.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{for(var s,a,l=r-n||1,u=this._root;n>t||t>=r||i>e||e>=o;)switch(a=(e<i)<<1|t<n,(s=new Array(4))[a]=u,u=s,l*=2,a){case 0:r=n+l,o=i+l;break;case 1:n=r-l,o=i+l;break;case 2:r=n+l,i=o-l;break;case 3:n=r-l,i=o-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this},Yi.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Yi.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Yi.find=function(t,e,n){var i,r,o,s,a,l,u,h=this._x0,c=this._y0,f=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new Bi(g,h,c,f,d)),null==n?n=1/0:(h=t-n,c=e-n,f=t+n,d=e+n,n*=n);l=p.pop();)if(!(!(g=l.node)||(r=l.x0)>f||(o=l.y0)>d||(s=l.x1)<h||(a=l.y1)<c))if(g.length){var m=(r+s)/2,x=(o+a)/2;p.push(new Bi(g[3],m,x,s,a),new Bi(g[2],r,x,m,a),new Bi(g[1],m,o,s,x),new Bi(g[0],r,o,m,x)),(u=(e>=x)<<1|t>=m)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var v=t-+this._x.call(null,g.data),y=e-+this._y.call(null,g.data),w=v*v+y*y;if(w<n){var b=Math.sqrt(n=w);h=t-b,c=e-b,f=t+b,d=e+b,i=g.data}}return i},Yi.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,i,r,o,s,a,l,u,h,c,f,d=this._root,p=this._x0,g=this._y0,m=this._x1,x=this._y1;if(!d)return this;if(d.length)for(;;){if((u=o>=(a=(p+m)/2))?p=a:m=a,(h=s>=(l=(g+x)/2))?g=l:x=l,e=d,!(d=d[c=h<<1|u]))return this;if(!d.length)break;(e[c+1&3]||e[c+2&3]||e[c+3&3])&&(n=e,f=c)}for(;d.data!==t;)if(i=d,!(d=d.next))return this;return(r=d.next)&&delete d.next,i?(r?i.next=r:delete i.next,this):e?(r?e[c]=r:delete e[c],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=r,this)},Yi.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Yi.root=function(){return this._root},Yi.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Yi.visit=function(t){var e,n,i,r,o,s,a=[],l=this._root;for(l&&a.push(new Bi(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,i=e.x0,r=e.y0,o=e.x1,s=e.y1)&&l.length){var u=(i+o)/2,h=(r+s)/2;(n=l[3])&&a.push(new Bi(n,u,h,o,s)),(n=l[2])&&a.push(new Bi(n,i,h,u,s)),(n=l[1])&&a.push(new Bi(n,u,r,o,h)),(n=l[0])&&a.push(new Bi(n,i,r,u,h))}return this},Yi.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new Bi(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var o,s=e.x0,a=e.y0,l=e.x1,u=e.y1,h=(s+l)/2,c=(a+u)/2;(o=r[0])&&n.push(new Bi(o,s,a,h,c)),(o=r[1])&&n.push(new Bi(o,h,a,l,c)),(o=r[2])&&n.push(new Bi(o,s,c,h,u)),(o=r[3])&&n.push(new Bi(o,h,c,l,u))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Yi.x=function(t){return arguments.length?(this._x=t,this):this._x},Yi.y=function(t){return arguments.length?(this._y=t,this):this._y};var tr,er,nr=0,ir=0,rr=0,or=0,sr=0,ar=0,lr="object"==typeof performance&&performance.now?performance:Date,ur="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function hr(){return sr||(ur(cr),sr=lr.now()+ar)}function cr(){sr=0}function fr(){this._call=this._time=this._next=null}function dr(t,e,n){var i=new fr;return i.restart(t,e,n),i}function pr(){sr=(or=lr.now())+ar,nr=ir=0;try{!function(){hr(),++nr;for(var t,e=tr;e;)(t=sr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--nr}()}finally{nr=0,function(){var t,e,n=tr,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:tr=e);er=t,mr(i)}(),sr=0}}function gr(){var t=lr.now(),e=t-or;e>1e3&&(ar-=e,or=t)}function mr(t){nr||(ir&&(ir=clearTimeout(ir)),t-sr>24?(t<1/0&&(ir=setTimeout(pr,t-lr.now()-ar)),rr&&(rr=clearInterval(rr))):(rr||(or=lr.now(),rr=setInterval(gr,1e3)),nr=1,ur(pr)))}function xr(t,e,n){var i=new fr;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e)}),e,n),i}fr.prototype=dr.prototype={constructor:fr,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?hr():+n)+(null==e?0:+e),this._next||er===this||(er?er._next=this:tr=this,er=this),this._call=t,this._time=n,mr()},stop:function(){this._call&&(this._call=null,this._time=1/0,mr())}};const vr=4294967296;function yr(t){return t.x}function wr(t){return t.y}var br=Math.PI*(3-Math.sqrt(5));function _r(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,s=.6,a=new Map,l=dr(c),u=ln("tick","end"),h=function(){let t=1;return()=>(t=(1664525*t+1013904223)%vr)/vr}();function c(){f(),u.call("tick",e),n<i&&(l.stop(),u.call("end",e))}function f(i){var l,u,h=t.length;void 0===i&&(i=1);for(var c=0;c<i;++c)for(n+=(o-n)*r,a.forEach((function(t){t(n)})),l=0;l<h;++l)null==(u=t[l]).fx?u.x+=u.vx*=s:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=s:(u.y=u.fy,u.vy=0);return e}function d(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var r=10*Math.sqrt(.5+n),o=n*br;e.x=r*Math.cos(o),e.y=r*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,h),e}return null==t&&(t=[]),d(),e={tick:f,restart:function(){return l.restart(c),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),a.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},randomSource:function(t){return arguments.length?(h=t,a.forEach(p),e):h},force:function(t,n){return arguments.length>1?(null==n?a.delete(t):a.set(t,p(n)),e):a.get(t)},find:function(e,n,i){var r,o,s,a,l,u=0,h=t.length;for(null==i?i=1/0:i*=i,u=0;u<h;++u)(s=(r=e-(a=t[u]).x)*r+(o=n-a.y)*o)<i&&(l=a,i=s);return l},on:function(t,n){return arguments.length>1?(u.on(t,n),e):u.on(t)}}}function kr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Sr(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Tr(){}var Ar=.7,Er=1/Ar,Nr="\\s*([+-]?\\d+)\\s*",Rr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Cr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zr=/^#([0-9a-f]{3,8})$/,Mr=new RegExp(`^rgb\\(${Nr},${Nr},${Nr}\\)$`),$r=new RegExp(`^rgb\\(${Cr},${Cr},${Cr}\\)$`),Dr=new RegExp(`^rgba\\(${Nr},${Nr},${Nr},${Rr}\\)$`),Pr=new RegExp(`^rgba\\(${Cr},${Cr},${Cr},${Rr}\\)$`),Or=new RegExp(`^hsl\\(${Rr},${Cr},${Cr}\\)$`),Ir=new RegExp(`^hsla\\(${Rr},${Cr},${Cr},${Rr}\\)$`),Lr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Fr(){return this.rgb().formatHex()}function Br(){return this.rgb().formatRgb()}function Wr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=zr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?qr(e):3===n?new Ur(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?jr(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?jr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Mr.exec(t))?new Ur(e[1],e[2],e[3],1):(e=$r.exec(t))?new Ur(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Dr.exec(t))?jr(e[1],e[2],e[3],e[4]):(e=Pr.exec(t))?jr(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Or.exec(t))?Qr(e[1],e[2]/100,e[3]/100,1):(e=Ir.exec(t))?Qr(e[1],e[2]/100,e[3]/100,e[4]):Lr.hasOwnProperty(t)?qr(Lr[t]):"transparent"===t?new Ur(NaN,NaN,NaN,0):null}function qr(t){return new Ur(t>>16&255,t>>8&255,255&t,1)}function jr(t,e,n,i){return i<=0&&(t=e=n=NaN),new Ur(t,e,n,i)}function Hr(t,e,n,i){return 1===arguments.length?((r=t)instanceof Tr||(r=Wr(r)),r?new Ur((r=r.rgb()).r,r.g,r.b,r.opacity):new Ur):new Ur(t,e,n,null==i?1:i);var r}function Ur(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Yr(){return`#${Vr(this.r)}${Vr(this.g)}${Vr(this.b)}`}function Gr(){const t=Xr(this.opacity);return`${1===t?"rgb(":"rgba("}${Zr(this.r)}, ${Zr(this.g)}, ${Zr(this.b)}${1===t?")":`, ${t})`}`}function Xr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Vr(t){return((t=Zr(t))<16?"0":"")+t.toString(16)}function Qr(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Jr(t,e,n,i)}function Kr(t){if(t instanceof Jr)return new Jr(t.h,t.s,t.l,t.opacity);if(t instanceof Tr||(t=Wr(t)),!t)return new Jr;if(t instanceof Jr)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(s=e===o?(n-i)/a+6*(n<i):n===o?(i-e)/a+2:(e-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new Jr(s,a,l,t.opacity)}function Jr(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function to(t){return(t=(t||0)%360)<0?t+360:t}function eo(t){return Math.max(0,Math.min(1,t||0))}function no(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}kr(Tr,Wr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Fr,formatHex:Fr,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Kr(this).formatHsl()},formatRgb:Br,toString:Br}),kr(Ur,Hr,Sr(Tr,{brighter(t){return t=null==t?Er:Math.pow(Er,t),new Ur(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Ar:Math.pow(Ar,t),new Ur(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ur(Zr(this.r),Zr(this.g),Zr(this.b),Xr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yr,formatHex:Yr,formatHex8:function(){return`#${Vr(this.r)}${Vr(this.g)}${Vr(this.b)}${Vr(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Gr,toString:Gr})),kr(Jr,(function(t,e,n,i){return 1===arguments.length?Kr(t):new Jr(t,e,n,null==i?1:i)}),Sr(Tr,{brighter(t){return t=null==t?Er:Math.pow(Er,t),new Jr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Ar:Math.pow(Ar,t),new Jr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Ur(no(t>=240?t-240:t+120,r,i),no(t,r,i),no(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Jr(to(this.h),eo(this.s),eo(this.l),Xr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Xr(this.opacity);return`${1===t?"hsl(":"hsla("}${to(this.h)}, ${100*eo(this.s)}%, ${100*eo(this.l)}%${1===t?")":`, ${t})`}`}}));const io=t=>()=>t;function ro(t){return 1==(t=+t)?oo:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):io(isNaN(e)?n:e)}}function oo(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):io(isNaN(t)?e:t)}const so=function t(e){var n=ro(e);function i(t,e){var i=n((t=Hr(t)).r,(e=Hr(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),s=oo(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=s(e),t+""}}return i.gamma=t,i}(1);function ao(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var lo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uo=new RegExp(lo.source,"g");function ho(t,e){var n,i,r,o=lo.lastIndex=uo.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(n=lo.exec(t))&&(i=uo.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),a[s]?a[s]+=r:a[++s]=r),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:ao(n,i)})),o=uo.lastIndex;return o<e.length&&(r=e.slice(o),a[s]?a[s]+=r:a[++s]=r),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)a[(n=l[i]).i]=n.x(t);return a.join("")})}var co,fo=180/Math.PI,po={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function go(t,e,n,i,r,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*fo,skewX:Math.atan(l)*fo,scaleX:s,scaleY:a}}function mo(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],l=[];return o=t(o),s=t(s),function(t,i,r,o,s,a){if(t!==r||i!==o){var l=s.push("translate(",null,e,null,n);a.push({i:l-4,x:ao(t,r)},{i:l-2,x:ao(i,o)})}else(r||o)&&s.push("translate("+r+e+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:ao(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(o.rotate,s.rotate,a,l),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:ao(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(o.skewX,s.skewX,a,l),function(t,e,n,i,o,s){if(t!==n||e!==i){var a=o.push(r(o)+"scale(",null,",",null,")");s.push({i:a-4,x:ao(t,n)},{i:a-2,x:ao(e,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,l),o=s=null,function(t){for(var e,n=-1,i=l.length;++n<i;)a[(e=l[n]).i]=e.x(t);return a.join("")}}}var xo=mo((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?po:go(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),vo=mo((function(t){return null==t?po:(co||(co=document.createElementNS("http://www.w3.org/2000/svg","g")),co.setAttribute("transform",t),(t=co.transform.baseVal.consolidate())?go((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):po)}),", ",")",")");function yo(t){return((t=Math.exp(t))+1/t)/2}const wo=function t(e,n,i){function r(t,r){var o,s,a=t[0],l=t[1],u=t[2],h=r[0],c=r[1],f=r[2],d=h-a,p=c-l,g=d*d+p*p;if(g<1e-12)s=Math.log(f/u)/e,o=function(t){return[a+t*d,l+t*p,u*Math.exp(e*t*s)]};else{var m=Math.sqrt(g),x=(f*f-u*u+i*g)/(2*u*n*m),v=(f*f-u*u-i*g)/(2*f*n*m),y=Math.log(Math.sqrt(x*x+1)-x),w=Math.log(Math.sqrt(v*v+1)-v);s=(w-y)/e,o=function(t){var i=t*s,r=yo(y),o=u/(n*m)*(r*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(e*i+y)-function(t){return((t=Math.exp(t))-1/t)/2}(y));return[a+o*d,l+o*p,u*r/yo(e*i+y)]}}return o.duration=1e3*s*e/Math.SQRT2,o}return r.rho=function(e){var n=Math.max(.001,+e),i=n*n;return t(n,i,i*i)},r}(Math.SQRT2,2,4);var bo=ln("start","end","cancel","interrupt"),_o=[];function ko(t,e,n,i,r,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function o(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}function s(o){var u,h,c,f;if(1!==n.state)return l();for(u in r)if((f=r[u]).name===n.name){if(3===f.state)return xr(s);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[u]):+u<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[u])}if(xr((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(o))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(c=n.tween.length),u=0,h=-1;u<c;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=f);i.length=h+1}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,s=i.length;++o<s;)i[o].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=dr(o,0,n.time)}(t,n,{name:e,index:i,group:r,on:bo,tween:_o,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function So(t,e){var n=Ao(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function To(t,e){var n=Ao(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Ao(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Eo(t,e){var n,i,r,o=t.__transition,s=!0;if(o){for(r in e=null==e?null:e+"",o)(n=o[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[r]):s=!1;s&&delete t.__transition}}function No(t,e){var n,i;return function(){var r=To(this,t),o=r.tween;if(o!==n)for(var s=0,a=(i=n=o).length;s<a;++s)if(i[s].name===e){(i=i.slice()).splice(s,1);break}r.tween=i}}function Ro(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=To(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:e,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=a;break}l===u&&r.push(a)}o.tween=r}}function Co(t,e,n){var i=t._id;return t.each((function(){var t=To(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Ao(t,i).value[e]}}function zo(t,e){var n;return("number"==typeof e?ao:e instanceof Wr?so:(n=Wr(e))?(e=n,so):ho)(t,e)}function Mo(t){return function(){this.removeAttribute(t)}}function $o(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Do(t,e,n){var i,r,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===i?r:r=e(i=s,n)}}function Po(t,e,n){var i,r,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===i?r:r=e(i=s,n)}}function Oo(t,e,n){var i,r,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(t))===(a=l+"")?null:s===i&&a===r?o:(r=a,o=e(i=s,l));this.removeAttribute(t)}}function Io(t,e,n){var i,r,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:s===i&&a===r?o:(r=a,o=e(i=s,l));this.removeAttributeNS(t.space,t.local)}}function Lo(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,r)),n}return r._value=e,r}function Fo(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,r)),n}return r._value=e,r}function Bo(t,e){return function(){So(this,t).delay=+e.apply(this,arguments)}}function Wo(t,e){return e=+e,function(){So(this,t).delay=e}}function qo(t,e){return function(){To(this,t).duration=+e.apply(this,arguments)}}function jo(t,e){return e=+e,function(){To(this,t).duration=e}}var Ho=ki.prototype.constructor;function Uo(t){return function(){this.style.removeProperty(t)}}var Yo=0;function Go(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Xo(){return++Yo}var Zo=ki.prototype;Go.prototype={constructor:Go,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=yn(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a,l,u=i[s],h=u.length,c=o[s]=new Array(h),f=0;f<h;++f)(a=u[f])&&(l=t.call(a,a.__data__,f,u))&&("__data__"in a&&(l.__data__=a.__data__),c[f]=l,ko(c[f],e,n,f,c,Ao(a,n)));return new Go(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=bn(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l,u=i[a],h=u.length,c=0;c<h;++c)if(l=u[c]){for(var f,d=t.call(l,l.__data__,c,u),p=Ao(l,n),g=0,m=d.length;g<m;++g)(f=d[g])&&ko(f,e,n,g,d,p);o.push(d),s.push(l)}return new Go(o,s,e,n)},selectChild:Zo.selectChild,selectChildren:Zo.selectChildren,filter:function(t){"function"!=typeof t&&(t=kn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,s=e[r],a=s.length,l=i[r]=[],u=0;u<a;++u)(o=s[u])&&t.call(o,o.__data__,u,s)&&l.push(o);return new Go(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l,u=e[a],h=n[a],c=u.length,f=s[a]=new Array(c),d=0;d<c;++d)(l=u[d]||h[d])&&(f[d]=l);for(;a<i;++a)s[a]=e[a];return new Go(s,this._parents,this._name,this._id)},selection:function(){return new Ho(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Xo(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],l=a.length,u=0;u<l;++u)if(s=a[u]){var h=Ao(s,e);ko(s,t,n,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Go(i,this._parents,t,n)},call:Zo.call,nodes:Zo.nodes,node:Zo.node,size:Zo.size,empty:Zo.empty,each:Zo.each,on:function(t,e){var n=this._id;return arguments.length<2?Ao(this.node(),n).on.on(t):this.each(function(t,e,n){var i,r,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?So:To;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(e,n),s.on=r}}(n,t,e))},attr:function(t,e){var n=pn(t),i="transform"===n?vo:zo;return this.attrTween(t,"function"==typeof e?(n.local?Io:Oo)(n,i,Co(this,"attr."+t,e)):null==e?(n.local?$o:Mo)(n):(n.local?Po:Do)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=pn(t);return this.tween(n,(i.local?Lo:Fo)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?xo:zo;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var o=Yn(this,t),s=(this.style.removeProperty(t),Yn(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}(t,i)).on("end.style."+t,Uo(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,o;return function(){var s=Yn(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=Yn(this,t)),s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a))}}(t,i,Co(this,"style."+t,e))).each(function(t,e){var n,i,r,o,s="style."+e,a="end."+s;return function(){var l=To(this,t),u=l.on,h=null==l.value[s]?o||(o=Uo(e)):void 0;u===n&&r===h||(i=(n=u).copy()).on(a,r=h),l.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,o=n+"";return function(){var s=Yn(this,t);return s===o?null:s===i?r:r=e(i=s,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,function(t,e,n){var i,r;function o(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&function(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}(t,o,n)),i}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Co(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&function(t){return function(e){this.textContent=t.call(this,e)}}(i)),e}return i._value=t,i}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Ao(this.node(),n).tween,o=0,s=r.length;o<s;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?No:Ro)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Bo:Wo)(e,t)):Ao(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?qo:jo)(e,t)):Ao(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){To(this,t).ease=e}}(e,t)):Ao(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;To(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(o,s){var a={value:s},l={value:function(){0==--r&&o()}};n.each((function(){var n=To(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),n.on=e})),0===r&&o()}))},[Symbol.iterator]:Zo[Symbol.iterator]};var Vo={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Qo(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}ki.prototype.interrupt=function(t){return this.each((function(){Eo(this,t)}))},ki.prototype.transition=function(t){var e,n;t instanceof Go?(e=t._id,t=t._name):(e=Xo(),(n=Vo).time=hr(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s,a=i[o],l=a.length,u=0;u<l;++u)(s=a[u])&&ko(s,t,e,u,a,n||Qo(s,e));return new Go(i,this._parents,t,e)};const Ko=t=>()=>t;function Jo(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function ts(t,e,n){this.k=t,this.x=e,this.y=n}ts.prototype={constructor:ts,scale:function(t){return 1===t?this:new ts(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new ts(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var es=new ts(1,0,0);function ns(t){t.stopImmediatePropagation()}function is(t){t.preventDefault(),t.stopImmediatePropagation()}function rs(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function os(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function ss(){return this.__zoom||es}function as(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ls(){return navigator.maxTouchPoints||"ontouchstart"in this}function us(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function hs(){var t,e,n,i=rs,r=os,o=us,s=as,a=ls,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],h=250,c=wo,f=ln("start","zoom","end"),d=0,p=10;function g(t){t.property("__zoom",ss).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",S).filter(a).on("touchstart.zoom",T).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",E).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(t,e){return(e=Math.max(l[0],Math.min(l[1],e)))===t.k?t:new ts(e,t.x,t.y)}function x(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new ts(t.k,i,r)}function v(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function y(t,e,n,i){t.on("start.zoom",(function(){w(this,arguments).event(i).start()})).on("interrupt.zoom end.zoom",(function(){w(this,arguments).event(i).end()})).tween("zoom",(function(){var t=this,o=arguments,s=w(t,o).event(i),a=r.apply(t,o),l=null==n?v(a):"function"==typeof n?n.apply(t,o):n,u=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),h=t.__zoom,f="function"==typeof e?e.apply(t,o):e,d=c(h.invert(l).concat(u/h.k),f.invert(l).concat(u/f.k));return function(t){if(1===t)t=f;else{var e=d(t),n=u/e[2];t=new ts(n,l[0]-e[0]*n,l[1]-e[1]*n)}s.zoom(null,t)}}))}function w(t,e,n){return!n&&t.__zooming||new b(t,e)}function b(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=r.apply(t,e),this.taps=0}function _(t,...e){if(i.apply(this,arguments)){var n=w(this,e).event(t),r=this.__zoom,a=Math.max(l[0],Math.min(l[1],r.k*Math.pow(2,s.apply(this,arguments)))),h=Ai(t);if(n.wheel)n.mouse[0][0]===h[0]&&n.mouse[0][1]===h[1]||(n.mouse[1]=r.invert(n.mouse[0]=h)),clearTimeout(n.wheel);else{if(r.k===a)return;n.mouse=[h,r.invert(h)],Eo(this),n.start()}is(t),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),150),n.zoom("mouse",o(x(m(r,a),n.mouse[0],n.mouse[1]),n.extent,u))}}function k(t,...e){if(!n&&i.apply(this,arguments)){var r=t.currentTarget,s=w(this,e,!0).event(t),a=Si(t.view).on("mousemove.zoom",(function(t){if(is(t),!s.moved){var e=t.clientX-h,n=t.clientY-c;s.moved=e*e+n*n>d}s.event(t).zoom("mouse",o(x(s.that.__zoom,s.mouse[0]=Ai(t,r),s.mouse[1]),s.extent,u))}),!0).on("mouseup.zoom",(function(t){a.on("mousemove.zoom mouseup.zoom",null),Mi(t.view,s.moved),is(t),s.event(t).end()}),!0),l=Ai(t,r),h=t.clientX,c=t.clientY;zi(t.view),ns(t),s.mouse=[l,this.__zoom.invert(l)],Eo(this),s.start()}}function S(t,...e){if(i.apply(this,arguments)){var n=this.__zoom,s=Ai(t.changedTouches?t.changedTouches[0]:t,this),a=n.invert(s),l=n.k*(t.shiftKey?.5:2),c=o(x(m(n,l),s,a),r.apply(this,e),u);is(t),h>0?Si(this).transition().duration(h).call(y,c,s,t):Si(this).call(g.transform,c,s,t)}}function T(n,...r){if(i.apply(this,arguments)){var o,s,a,l,u=n.touches,h=u.length,c=w(this,r,n.changedTouches.length===h).event(n);for(ns(n),s=0;s<h;++s)l=[l=Ai(a=u[s],this),this.__zoom.invert(l),a.identifier],c.touch0?c.touch1||c.touch0[2]===l[2]||(c.touch1=l,c.taps=0):(c.touch0=l,o=!0,c.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(c.taps<2&&(e=l[0],t=setTimeout((function(){t=null}),500)),Eo(this),c.start())}}function A(t,...e){if(this.__zooming){var n,i,r,s,a=w(this,e).event(t),l=t.changedTouches,h=l.length;for(is(t),n=0;n<h;++n)r=Ai(i=l[n],this),a.touch0&&a.touch0[2]===i.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===i.identifier&&(a.touch1[0]=r);if(i=a.that.__zoom,a.touch1){var c=a.touch0[0],f=a.touch0[1],d=a.touch1[0],p=a.touch1[1],g=(g=d[0]-c[0])*g+(g=d[1]-c[1])*g,v=(v=p[0]-f[0])*v+(v=p[1]-f[1])*v;i=m(i,Math.sqrt(g/v)),r=[(c[0]+d[0])/2,(c[1]+d[1])/2],s=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],s=a.touch0[1]}a.zoom("touch",o(x(i,r,s),a.extent,u))}}function E(t,...i){if(this.__zooming){var r,o,s=w(this,i).event(t),a=t.changedTouches,l=a.length;for(ns(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),r=0;r<l;++r)o=a[r],s.touch0&&s.touch0[2]===o.identifier?delete s.touch0:s.touch1&&s.touch1[2]===o.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(o=Ai(o,this),Math.hypot(e[0]-o[0],e[1]-o[1])<p)){var u=Si(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return g.transform=function(t,e,n,i){var r=t.selection?t.selection():t;r.property("__zoom",ss),t!==r?y(t,e,n,i):r.interrupt().each((function(){w(this,arguments).event(i).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},g.scaleBy=function(t,e,n,i){g.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n,i)},g.scaleTo=function(t,e,n,i){g.transform(t,(function(){var t=r.apply(this,arguments),i=this.__zoom,s=null==n?v(t):"function"==typeof n?n.apply(this,arguments):n,a=i.invert(s),l="function"==typeof e?e.apply(this,arguments):e;return o(x(m(i,l),s,a),t,u)}),n,i)},g.translateBy=function(t,e,n,i){g.transform(t,(function(){return o(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),u)}),null,i)},g.translateTo=function(t,e,n,i,s){g.transform(t,(function(){var t=r.apply(this,arguments),s=this.__zoom,a=null==i?v(t):"function"==typeof i?i.apply(this,arguments):i;return o(es.translate(a[0],a[1]).scale(s.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,u)}),i,s)},b.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=Si(this.that).datum();f.call(t,this.that,new Jo(t,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:f}),e)}},g.wheelDelta=function(t){return arguments.length?(s="function"==typeof t?t:Ko(+t),g):s},g.filter=function(t){return arguments.length?(i="function"==typeof t?t:Ko(!!t),g):i},g.touchable=function(t){return arguments.length?(a="function"==typeof t?t:Ko(!!t),g):a},g.extent=function(t){return arguments.length?(r="function"==typeof t?t:Ko([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),g):r},g.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],g):[l[0],l[1]]},g.translateExtent=function(t){return arguments.length?(u[0][0]=+t[0][0],u[1][0]=+t[1][0],u[0][1]=+t[0][1],u[1][1]=+t[1][1],g):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},g.constrain=function(t){return arguments.length?(o=t,g):o},g.duration=function(t){return arguments.length?(h=+t,g):h},g.interpolate=function(t){return arguments.length?(c=t,g):c},g.on=function(){var t=f.on.apply(f,arguments);return t===f?g:t},g.clickDistance=function(t){return arguments.length?(d=(t=+t)*t,g):Math.sqrt(d)},g.tapDistance=function(t){return arguments.length?(p=+t,g):p},g}function cs(t){const e=function(t){return t.startsWith("#")?tn:t.startsWith("rgba")?nn:t.startsWith("rgb")?en:t.startsWith("hsl")?rn:void 0}(t);switch(e){case tn:return function(t){return`rgb(${t.match(/\w\w/g)?.map((t=>+`0x${t}`))})`}(t);case en:return t;case nn:return function(t){const e=t.match(/\d+/g);return e?.splice(3),`rgb(${e?.join(",")})`}(t);default:return null}}function fs(t,e,n,i){if(null==t.x||null==t.y)return!1;const r=t.x-e<=n&&n<=t.x+e,o=t.y-e<=i&&i<=t.y+e;return r&&o}ts.prototype;const ds={centerPosition:{},centerStrength:1,collideStrength:.1,collideAdditionalRadius:4,collideIterations:2,collideOffMax:{links:0,nodes:0},collideOn:!0,chargeStrength:-40,chargeDistanceMax:1/0,chargeDistanceMin:1,xForce:0,xStrength:.1,yForce:0,yStrength:.1,linkDistance:30,linkIterations:1,linkStrength:1,collideRadius:null},ps={zoomExtent:[.3,10],translateExtent:[[],[]],translateExtentEnable:!0,translateExtentCoefficient:[3,3],highlightSizingAdditional:.5,highlightColorFadingMin:.15,highlightTextShiftXAdditional:0,highlightTextShiftYAdditional:2,highlightTextSizingAdditional:1,highlightTextWeightAdditional:0,highlightTextWidthAdditional:10,highlightOnlyRoot:!0,stickAfterDrag:!1,highlightByHover:!0,highlightLinkFadingMin:.21,highlightFadingMin:.21,highlightTextFadingMin:.21,highlightArrowFadingMin:.21,highlightDownStep:.2,highlightUpStep:.2,dragPlaceCoefficient:function(t,e,n,i){if(t.x&&t.y)return fs(t,i,e,n)?t.index:void 0},nodeRadiusInitial:4,nodeRadiusCoefficient:5,nodeRadiusFactor:1,nodeRadiusFlexible:!0,zoomInitial:null,showDrawTime:!0,showDrawTimeEveryTick:!1},gs={cache:!1},ms={alpha:1,textAlpha:1,borderColor:"#000000FF",borderWidth:.1,textWidth:20,textShiftX:0,textFont:"Arial",textAlign:"center",textColor:"#333",radius:4,textStyle:"normal",textWeight:500,textGap:1,highlightFading:!0,highlightColor:!1,highlightSizing:!0,highlightTextFading:!0,highlightTextSizing:!0},xs={cache:!1,particles:!0},vs={alpha:1,highlightFading:!0,pretty:!0,arrow:!0,arrowAlpha:1,arrowSize:2,arrowHighlightFading:!0,arrowReverseAppear:!0,particleAlpha:1,particleColor:"#000000FF",particleCount:2,particleRadius:.5,particleSteps:60},ys="#999",ws="#000000FF",bs=1,_s=.1,ks=1,Ss=1,Ts=1.5,As=20,Es=1.5,Ns=3.5,Rs=2.5,Cs=4,zs=200;function Ms(t,e){return{...e??ds,...t}}function $s(t,e){return{...e??ps,...t}}function Ds(t,e){return{...e??xs,...t}}function Ps(t,e,n,i){return{...vs,drawExtraLink:null,drawLink:null,color:i?.areaTransform&&i?.areaTransform.k>Ss?ws:ys,arrowColor:i?.areaTransform&&i?.areaTransform.k>Ss?ws:ys,width:i?.areaTransform&&i?.areaTransform.k>ks?_s:bs}}function Os(t,e){return{...e??gs,idGetter:Bs,...t}}const Is=function(){const t={},e=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];let n=0;return function(i){return t[i]||(t[i]=e[n],n++,n>=e.length&&(n=0)),t[i]}}();function Ls(t,e,n,i){const{textShiftY:r,textSize:o}=function(t){let e=Ns,n=Cs;if(t){const i=(As-Ts)/zs,r=(Ns-Es)/zs,o=(Cs-Rs)/zs;if(t.k>=As)e=Es,n=Rs;else if(t.k>Ts){const s=(t.k-Ts)/i;e-=s*r,n-=s*o}}return{textSize:e,textShiftY:n}}(i?.areaTransform);return{...ms,nodeDraw:null,nodeExtraDraw:null,textDraw:null,textExtraDraw:null,color:Is(String(t.group??"_DEFAULT")),textVisible:Boolean(i?.areaTransform&&i.areaTransform.k>Ts),text:t.name??t.id.toString(),textShiftY:r,textSize:o}}function Fs({radiusFlexible:t,radiusInitial:e,linkCount:n,radiusCoefficient:i,radiusFactor:r}){return(t&&n?n/i:0)*r+e}function Bs(t){return t.id}function Ws(t,e,n){return[(t.clientX-e.left-n.x)/n.k,(t.clientY-e.top-n.y)/n.k]}function qs(t,e){return e}function js({areaRect:t,areaTransform:e,mouseEvent:n,nodes:i,graphSettings:r}){if(!t)return;const[o,s]=Ws(n,t,e);return sn(i,(t=>{if(fs(t,t._radius??Fs({radiusFlexible:r.nodeRadiusFlexible,radiusInitial:r.nodeRadiusInitial,radiusCoefficient:r.nodeRadiusCoefficient,radiusFactor:r.nodeRadiusFactor,linkCount:t.linkCount}),o,s))return t.index}))}function Hs(t,e,n,i,r,o){let s,a;if(s="function"==typeof r?r(t,e,n,i):r,s&&"object"==typeof s&&!Array.isArray(s))for(const t in s)void 0===s[t]&&delete s[t];return o&&(a="function"==typeof o?o(t,e,n,i):o,a&&"object"==typeof a&&!Array.isArray(a)&&qs(0,void 0===s||"object"==typeof s&&!Array.isArray(s)))?{...a,...s}:s}function Us({context:t,id:e,textAlign:n,textColor:i,textFont:r,textStyle:o,textGap:s,textWeight:a,textSize:l,text:u,x:h,y:c,cachedNodeText:f,maxWidth:d}){if(t.font=`${o} normal ${a} ${l}px ${r}`,t.fillStyle=i,t.textAlign=n,null!=f[e])return void f[e].forEach(((e,n)=>{t.fillText(e,h,c+n*l+n*s)}));if(null==d||t.measureText(u).width<=d)return f[e]=[u],void t.fillText(u,h,c);const p=t.measureText(" ").width,g=[];let m=0,x="";for(const e of u.split(" ")){m+=t.measureText(e).width,""!==x?m>d?(m=0,g.push(x),x=e):(m+=p,x+=` ${e}`):x=e}""!==x&&g.push(x),f[e]=g,g.forEach(((e,n)=>{t.fillText(e,h,c+n*l+n*s)}))}function Ys(t,e=0){const n=t.source,i=t.target;if("object"!=typeof n||"object"!=typeof i)return null;const r=(i.x??0)-(n.x??0),o=(i.y??0)-(n.y??0),s=Math.sqrt(r*r+o*o),a=n._radius??0,l=(i._radius??0)+(e>0?.85*e:0);return{x1:(n.x??0)+r*a/s,y1:(n.y??0)+o*a/s,x2:(i.x??0)-r*l/s,y2:(i.y??0)-o*l/s}}function Gs(t,e,n){const i=t+e;let r=t+(i-t)*n;return r>i&&(r=i),r<t&&(r=t),r}let Xs=0,Zs=0;class Vs{nodes;links;particles={};width;height;root;container;area;graphSettings;forceSettings;nodeSettings;linkSettings;listeners;context;simulation;areaTransform=es;areaRect;draw;eventAbortController;cachedNodeText={};linkOptionsCache={};nodeOptionsCache={};isDragging=!1;highlightedNode=null;highlightedNeighbors=null;highlightProgress=1;highlightWorking=!1;highlightDrawing=!1;get simulationWorking(){return((this.simulation?.alpha?.()??0)-(this.simulation?.alphaMin?.()??0))/(this.simulation?.alphaDecay?.()??0)>0}get state(){return{areaTransform:this.areaTransform,cachedNodeText:this.cachedNodeText,context:this.context,eventAbortController:this.eventAbortController,highlightProgress:this.highlightProgress,highlightDrawing:this.highlightDrawing,highlightedNeighbors:this.highlightedNeighbors,highlightedNode:this.highlightedNode,highlightWorking:this.highlightWorking,isDragging:this.isDragging,simulation:this.simulation,simulationWorking:this.simulationWorking,height:this.height,links:this.links,nodes:this.nodes,width:this.width,forceSettings:this.forceSettings,graphSettings:this.graphSettings,linkSettings:this.linkSettings,nodeSettings:this.nodeSettings}}constructor({links:t,nodes:e,root:n,forceSettings:i,linkSettings:r,listeners:o,nodeSettings:s,graphSettings:a}){n.style.overflow="hidden",this.root=n,this.forceSettings=Ms(i),this.linkSettings=Ds(r),this.nodeSettings=Os(s),this.listeners=o??{},this.graphSettings=$s(a),this.eventAbortController=new AbortController,this.nodes=e,this.links=t,this.height=0,this.width=0,this.draw=this.initDraw(),this.init()}get dpi(){return devicePixelRatio}getData(){return{links:this.links,nodes:this.nodes}}changeData(t,e){null!=t.links&&(this.links=t.links),null!=t.nodes&&(this.nodes=t.nodes),null==t.nodes&&null==t.links||this.updateData(e)}changeSettings(t){t.graphSettings&&(this.graphSettings=$s(t.graphSettings,this.graphSettings),this.draw=this.initDraw(),this.initZoom(this.areaTransform)),t.forceSettings&&(this.forceSettings=Ms(t.forceSettings,this.forceSettings)),t.linkSettings&&(this.linkSettings=Ds(t.linkSettings,this.linkSettings),this.linkOptionsCache={}),t.nodeSettings&&(this.nodeSettings=Os(t.nodeSettings,this.nodeSettings),this.cachedNodeText={},this.nodeOptionsCache={}),t.forceSettings?this.updateSimulation():this.tick()}clearCache(){this.nodeOptionsCache={},this.linkOptionsCache={},this.cachedNodeText={}}tick(){this.simulationWorking||this.highlightWorking||this.draw()}restart(t){this.simulation&&this.simulation.alpha(t??1).restart()}start(){this.simulation&&this.simulation.alpha(1).restart(),this.container&&(this.container.style.display="block")}stop(){this.simulation&&this.simulation.stop(),this.container&&(this.container.style.display="none")}create(){this.init()}destroy(){this.simulation&&(this.simulation.stop(),this.simulation=void 0),this.clearHTMLElements(),this.clearState(),this.clearDataDependencies()}clearHTMLElements(){this.root.replaceChildren(),this.area=void 0,this.context=void 0,this.container=void 0,this.eventAbortController.abort(),this.eventAbortController=new AbortController}updateSimulation(){this.simulation&&(this.initSimulationForces(),this.simulation.alpha(1),this.simulation.restart())}clearState(){this.isDragging=!1,this.highlightedNode=null,this.highlightedNeighbors=null,this.highlightProgress=0,this.highlightWorking=!1,this.highlightDrawing=!1}clearDataDependencies(){this.cachedNodeText={},this.nodeOptionsCache={},this.linkOptionsCache={}}updateData(t){this.clearDataDependencies(),this.simulation&&(this.initCollideForce(),this.simulation.nodes(this.nodes).force("link",Ji(this.links).id(this.nodeSettings.idGetter).distance(this.forceSettings.linkDistance).strength(this.forceSettings.linkStrength).iterations(this.forceSettings.linkIterations)).alpha(t??.5).restart())}updateSize(){this.clearHTMLElements(),this.initArea(),this.initDnd(),this.initZoom(),this.initResize(),this.initPointer(),this.simulationWorking||this.highlightWorking||this.draw()}init(){this.initArea(),this.initSimulation(),this.initDnd(),this.initZoom(),this.initResize(),this.initPointer()}initSimulation(){this.simulation||(this.simulation=_r().nodes(this.nodes).force("link",Ji(this.links).id(this.nodeSettings.idGetter)).on("tick",(()=>{this.draw()})).on("end",(()=>{this.listeners.onSimulationEnd?.(this.state),this.graphSettings.showDrawTime&&function(){const t=Xs/Zs;console.log("average draw: ",t)}()})),this.initSimulationForces())}initSimulationForces(){if(!this.simulation)return;const t=this.simulation.force("link");t&&(t.distance(this.forceSettings.linkDistance).strength(this.forceSettings.linkStrength).iterations(this.forceSettings.linkIterations),this.simulation.force("x",function(t){var e,n,i,r=Gi(.1);function o(t){for(var r,o=0,s=e.length;o<s;++o)(r=e[o]).vx+=(i[o]-r.x)*n[o]*t}function s(){if(e){var o,s=e.length;for(n=new Array(s),i=new Array(s),o=0;o<s;++o)n[o]=isNaN(i[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!=typeof t&&(t=Gi(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:Gi(+t),s(),o):r},o.x=function(e){return arguments.length?(t="function"==typeof e?e:Gi(+e),s(),o):t},o}(this.forceSettings.xForce).strength(this.forceSettings.xStrength)).force("y",function(t){var e,n,i,r=Gi(.1);function o(t){for(var r,o=0,s=e.length;o<s;++o)(r=e[o]).vy+=(i[o]-r.y)*n[o]*t}function s(){if(e){var o,s=e.length;for(n=new Array(s),i=new Array(s),o=0;o<s;++o)n[o]=isNaN(i[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!=typeof t&&(t=Gi(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:Gi(+t),s(),o):r},o.y=function(e){return arguments.length?(t="function"==typeof e?e:Gi(+e),s(),o):t},o}(this.forceSettings.yForce).strength(this.forceSettings.yStrength)).force("charge",function(){var t,e,n,i,r,o=Gi(-30),s=1,a=1/0,l=.81;function u(n){var r,o=t.length,s=ji(t,yr,wr).visitAfter(c);for(i=n,r=0;r<o;++r)e=t[r],s.visit(f)}function h(){if(t){var e,n,i=t.length;for(r=new Array(i),e=0;e<i;++e)n=t[e],r[n.index]=+o(n,e,t)}}function c(t){var e,n,i,o,s,a=0,l=0;if(t.length){for(i=o=s=0;s<4;++s)(e=t[s])&&(n=Math.abs(e.value))&&(a+=e.value,l+=n,i+=n*e.x,o+=n*e.y);t.x=i/l,t.y=o/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=r[e.data.index]}while(e=e.next)}t.value=a}function f(t,o,u,h){if(!t.value)return!0;var c=t.x-e.x,f=t.y-e.y,d=h-o,p=c*c+f*f;if(d*d/l<p)return p<a&&(0===c&&(p+=(c=Xi(n))*c),0===f&&(p+=(f=Xi(n))*f),p<s&&(p=Math.sqrt(s*p)),e.vx+=c*t.value*i/p,e.vy+=f*t.value*i/p),!0;if(!(t.length||p>=a)){(t.data!==e||t.next)&&(0===c&&(p+=(c=Xi(n))*c),0===f&&(p+=(f=Xi(n))*f),p<s&&(p=Math.sqrt(s*p)));do{t.data!==e&&(d=r[t.data.index]*i/p,e.vx+=c*d,e.vy+=f*d)}while(t=t.next)}}return u.initialize=function(e,i){t=e,n=i,h()},u.strength=function(t){return arguments.length?(o="function"==typeof t?t:Gi(+t),h(),u):o},u.distanceMin=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u.distanceMax=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.theta=function(t){return arguments.length?(l=t*t,u):Math.sqrt(l)},u}().strength(this.forceSettings.chargeStrength).distanceMax(this.forceSettings.chargeDistanceMax).distanceMin(this.forceSettings.chargeDistanceMin)).force("center",function(t,e){var n,i=1;function r(){var r,o,s=n.length,a=0,l=0;for(r=0;r<s;++r)a+=(o=n[r]).x,l+=o.y;for(a=(a/s-t)*i,l=(l/s-e)*i,r=0;r<s;++r)(o=n[r]).x-=a,o.y-=l}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r.strength=function(t){return arguments.length?(i=+t,r):i},r}(this.forceSettings.centerPosition.x??0,this.forceSettings.centerPosition.y??0).strength(this.forceSettings.centerStrength)),this.initCollideForce(!0))}initCollideForce(t){if(!this.simulation)return;if(!this.forceSettings.collideOn)return void(this.simulation.force("collide")&&this.simulation.force("collide",null));const e=0!=this.forceSettings.collideOffMax.links&&0!=this.forceSettings.collideOffMax.nodes,n=e&&this.forceSettings.collideOffMax.nodes<this.nodes.length,i=e&&this.forceSettings.collideOffMax.links<this.links.length;n&&i?this.simulation.force("collide",null):this.simulation.force("collide")&&!t||this.simulation.force("collide",function(t){var e,n,i,r=1,o=1;function s(){for(var t,s,l,u,h,c,f,d=e.length,p=0;p<o;++p)for(s=ji(e,Zi,Vi).visitAfter(a),t=0;t<d;++t)l=e[t],c=n[l.index],f=c*c,u=l.x+l.vx,h=l.y+l.vy,s.visit(g);function g(t,e,n,o,s){var a=t.data,d=t.r,p=c+d;if(!a)return e>u+p||o<u-p||n>h+p||s<h-p;if(a.index>l.index){var g=u-a.x-a.vx,m=h-a.y-a.vy,x=g*g+m*m;x<p*p&&(0===g&&(x+=(g=Xi(i))*g),0===m&&(x+=(m=Xi(i))*m),x=(p-(x=Math.sqrt(x)))/x*r,l.vx+=(g*=x)*(p=(d*=d)/(f+d)),l.vy+=(m*=x)*p,a.vx-=g*(p=1-p),a.vy-=m*p)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var i,r,o=e.length;for(n=new Array(o),i=0;i<o;++i)r=e[i],n[r.index]=+t(r,i,e)}}return"function"!=typeof t&&(t=Gi(null==t?1:+t)),s.initialize=function(t,n){e=t,i=n,l()},s.iterations=function(t){return arguments.length?(o=+t,s):o},s.strength=function(t){return arguments.length?(r=+t,s):r},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:Gi(+e),l(),s):t},s}().radius(((t,e)=>{if(this.forceSettings.collideRadius)return Hs(t,e,this.nodes,this.state,this.forceSettings.collideRadius,void 0);const n=Hs(t,e,this.nodes,this.state,this.nodeSettings.options??{},Ls);return Fs({radiusFlexible:this.graphSettings.nodeRadiusFlexible,radiusInitial:n.radius??this.graphSettings.nodeRadiusInitial,radiusCoefficient:this.graphSettings.nodeRadiusCoefficient,radiusFactor:this.graphSettings.nodeRadiusFactor,linkCount:t.linkCount})+this.forceSettings.collideAdditionalRadius})).strength(this.forceSettings.collideStrength).iterations(this.forceSettings.collideIterations))}initArea(){if(!this.area||!this.context||!this.container){if(this.container=Ti("div").attr("style","padding: 0 !important; width: 100%; height: 100%;").node(),!this.container)throw new Error("couldn't create container");this.root.appendChild(this.container);const{width:t,height:e}=this.root.getBoundingClientRect();if(this.width=t,this.height=e,this.area=Ti("canvas").attr("width",this.dpi*this.width).attr("height",this.dpi*this.height).attr("style","width: 100%; height: 100%; border: none !important;").node(),!this.area)throw new Error("couldn't create canvas");if(this.container.appendChild(this.area),this.areaRect=this.area.getBoundingClientRect(),this.context=this.area.getContext("2d"),!this.context)throw new Error("couldn't create canvas context");this.context.scale(this.dpi,this.dpi)}}initDraw(){function t(){if(this.highlightDrawing=!0,!this.highlightWorking&&this.highlightProgress>0){if(this.highlightProgress-=this.graphSettings.highlightDownStep,!this.simulationWorking)return void requestAnimationFrame((()=>this.draw()));if(!this.linkSettings.particles)return}if(this.highlightWorking&&this.highlightProgress<1){if(this.highlightProgress+=this.graphSettings.highlightUpStep,!this.simulationWorking)return void requestAnimationFrame((()=>this.draw()));if(!this.linkSettings.particles)return}this.linkSettings.particles&&this.highlightWorking&&!this.simulationWorking||!this.highlightWorking&&this.highlightProgress<=0&&(this.highlightedNeighbors||this.highlightedNode)&&(this.highlightedNeighbors=null,this.highlightedNode=null,this.particles={},!this.simulationWorking)?requestAnimationFrame((()=>this.draw())):this.highlightDrawing=!1}function e(){if(!this.context)return;const e=this.state;if(this.listeners.onDraw)return void this.listeners.onDraw(e,(t=>{this.highlightDrawing=t}),(()=>{this.highlightedNeighbors&&(this.highlightedNeighbors=null),this.highlightedNode&&(this.highlightedNode=null)}));this.context.save(),this.context.clearRect(0,0,this.width,this.height),this.context.translate(this.areaTransform.x,this.areaTransform.y),this.context.scale(this.areaTransform.k,this.areaTransform.k);const n=[],i=[];this.nodes.forEach(function(t,e,n){return function(i,r){if(!this.context||!i.x||!i.y)return;let o;if(this.nodeSettings.cache&&this.nodeOptionsCache[i.id]?o=this.nodeOptionsCache[i.id]:(o=Hs(i,r,this.nodes,n,this.nodeSettings.options??{},Ls),this.nodeSettings.cache&&(this.nodeOptionsCache[i.id]=o)),o.nodeDraw&&o.textDraw)return t.push((()=>{o?.nodeDraw?.(i,o,n)})),void e.push((()=>{o?.textDraw?.(i,o,n)}));let s=o.alpha,a=o.color,l=o.radius??this.graphSettings.nodeRadiusInitial,u=o.textAlpha,h=o.textSize,c=o.textShiftX,f=o.textShiftY,d=o.textWeight,p=o.textWidth;if(this.highlightedNeighbors&&this.highlightedNode)if(this.highlightedNeighbors.has(i.id)||this.highlightedNode.id==i.id)(!this.graphSettings.highlightOnlyRoot||this.graphSettings.highlightOnlyRoot&&this.highlightedNode.id===i.id)&&(o.highlightSizing&&(l=Gs(l,this.graphSettings.highlightSizingAdditional,this.highlightProgress)),o.highlightTextSizing&&(h=Gs(h,this.graphSettings.highlightTextSizingAdditional,this.highlightProgress),c=Gs(c,this.graphSettings.highlightTextShiftXAdditional,this.highlightProgress),f=Gs(f,this.graphSettings.highlightTextShiftYAdditional,this.highlightProgress),d=Gs(d,this.graphSettings.highlightTextWeightAdditional,this.highlightProgress),p=Gs(p,this.graphSettings.highlightTextWidthAdditional,this.highlightProgress)));else{if(o.highlightFading){const t=this.graphSettings.highlightFadingMin<s?this.graphSettings.highlightFadingMin:s;s=Gs(t,s-t,1-this.highlightProgress)}if(o.highlightTextFading){const t=this.graphSettings.highlightTextFadingMin<u?this.graphSettings.highlightTextFadingMin:u;u=Gs(t,u-t,1-this.highlightProgress)}if(o.highlightColor){const t=function(t){if(!t)return null;const e=t.match(/\d+/g);return e?{r:+e[0],g:+e[1],b:+e[2]}:null}(cs(a));if(t){const e=function(t,e){const n=(t.r+t.g+t.b)/3;return{r:t.r*e+n*(1-e),g:t.g*e+n*(1-e),b:t.b*e+n*(1-e)}}(t,this.graphSettings.highlightColorFadingMin),n=function(t,e,n){return{r:t.r+(e.r-t.r)*n,g:t.g+(e.g-t.g)*n,b:t.b+(e.b-t.b)*n}}(t,e,this.highlightProgress);a=`rgb(${n.r}, ${n.g}, ${n.b})`}}}const g=Fs({radiusFlexible:this.graphSettings.nodeRadiusFlexible,radiusInitial:l,radiusCoefficient:this.graphSettings.nodeRadiusCoefficient,radiusFactor:this.graphSettings.nodeRadiusFactor,linkCount:i.linkCount});i._radius=g,function(t){const e=-t.transform.x/t.transform.k,n=(t.width-t.transform.x)/t.transform.k,i=-t.transform.y/t.transform.k,r=(t.height-t.transform.y)/t.transform.k;return e<t.x+t.radius+10&&t.x-t.radius-10<n&&i<t.y+t.radius+10&&t.y-t.radius-10<r}({height:this.height,width:this.width,x:i.x,y:i.y,radius:g,transform:this.areaTransform})?(i._visible=!0,t.push((()=>{this.context&&i.x&&i.y&&(this.context.beginPath(),this.context.globalAlpha=s,this.context.lineWidth=o.borderWidth,this.context.strokeStyle=o.borderColor,this.context.fillStyle=a,this.context.arc(i.x,i.y,g,0,2*Math.PI),this.context.fill(),this.context.stroke())})),o.nodeExtraDraw&&t.push((()=>{o?.nodeExtraDraw?.(i,{...o,radius:g,alpha:s,color:a,textAlpha:u,textSize:h,textShiftX:c,textShiftY:f,textWeight:d,textWidth:p},n)})),o.textVisible&&o.text&&e.push((()=>{o.textDraw?o.textDraw(i,{...o,radius:g,alpha:s,color:a,textAlpha:u,textSize:h,textShiftX:c,textShiftY:f,textWeight:d,textWidth:p},n):this.context&&i.x&&i.y&&o.text&&(this.context.beginPath(),this.context.globalAlpha=u,Us({id:i.id,cachedNodeText:this.cachedNodeText,context:this.context,text:o.text,textAlign:o.textAlign,textColor:o.textColor,textFont:o.textFont,textSize:h,x:i.x+c,y:i.y+g+f,maxWidth:p,textStyle:o.textStyle,textWeight:d,textGap:o.textGap}),o.textExtraDraw&&o.textExtraDraw(i,{...o,radius:g,alpha:s,color:a,textAlpha:u,textSize:h,textShiftX:c,textShiftY:f,textWeight:d,textWidth:p},n))}))):i._visible=!1}}(i,n,e).bind(this)),this.links.forEach(function(t){return function(e,n){if(!(this.context&&"object"==typeof e.source&&"object"==typeof e.target&&e.source.x&&e.source.y&&e.target.x&&e.target.y))return;if(!e.source._visible&&!e.target._visible)return;const i=`${e.target.id}${e.source.id}`;let r;if(this.linkSettings.cache&&this.linkOptionsCache[i]?r=this.linkOptionsCache[i]:(r=function(t,e,n,i,r,o){let s,a;if(s="function"==typeof r?r(t,e,n,i):r,s&&"object"==typeof s&&!Array.isArray(s))for(const t in s)void 0===s[t]&&delete s[t];return o&&(a="function"==typeof o?o(t,e,n,i):o,a&&"object"==typeof a&&!Array.isArray(a)&&qs(0,void 0===s||"object"==typeof s&&!Array.isArray(s)))?{...a,...s}:s}(e,n,this.links,t,this.linkSettings.options??{},Ps),this.linkSettings.cache&&(this.linkOptionsCache[i]=r)),r.drawLink)return void r.drawLink(e,r,t);let o=r.alpha,s=r.arrowReverseAppear?0:r.arrowAlpha;if(this.highlightedNeighbors&&this.highlightedNode)if(this.highlightedNode.id!=e.source.id&&this.highlightedNode.id!=e.target.id){if(r.highlightFading){const t=this.graphSettings.highlightLinkFadingMin<o?this.graphSettings.highlightLinkFadingMin:o;o=Gs(t,o-t,1-this.highlightProgress)}if(r.arrow&&r.arrowHighlightFading&&!r.arrowReverseAppear){const t=this.graphSettings.highlightArrowFadingMin<s?this.graphSettings.highlightArrowFadingMin:s;s=Gs(t,s-t,1-this.highlightProgress)}}else r.arrow&&r.arrowReverseAppear&&(s=Gs(0,r.arrowAlpha,this.highlightProgress));this.context.beginPath(),this.context.globalAlpha=o,this.context.strokeStyle=r.color,this.context.lineWidth=r.width;let a=e.source.x,l=e.source.y,u=e.target.x,h=e.target.y;if(r.pretty){const t=r.arrow&&s>0,{x1:n,x2:i,y1:o,y2:c}=Ys(e,t?r.arrowSize:0)??{x1:0,x2:0,y1:0,y2:0};a=n,u=i,l=o,h=c}if(this.context.moveTo(a,l),this.context.lineTo(u,h),this.context.stroke(),this.linkSettings.particles&&this.highlightedNode&&(this.highlightedNode.id===e.source.id||this.highlightedNode.id===e.target.id)){if(!this.particles[i]){const t=e.source.id,n=e.target.id;this.particles[i]=Array.from({length:r.particleCount},((e,i)=>({step:0,wait:i*(r.particleSteps/r.particleCount),sourceId:t,targetId:n})))}this.particles[i].forEach((t=>{this.context&&(!function(t){if(t.particle.wait>0)return void t.particle.wait--;const e=t.totalSteps-t.particle.step,n=t.particle.step/t.totalSteps;if(0===e)return t.particle.x=t.xEnd,t.particle.y=t.yEnd,void(t.particle.step=0);const i=t.xEnd-t.xStart,r=t.yEnd-t.yStart,o=t.xStart+i*n,s=t.yStart+r*n;t.particle.x=o,t.particle.y=s,t.particle.step++}({particle:t,totalSteps:r.particleSteps,xEnd:u,xStart:a,yEnd:h,yStart:l}),null!=t.x&&null!=t.y&&(this.context.beginPath(),this.context.arc(t.x,t.y,r.particleRadius,0,2*Math.PI),this.context.fillStyle=r.particleColor,this.context.fill(),this.context.stroke()))}))}if(r.arrow&&s>0){const{x1:t,x2:n,y1:i,y2:o}=Ys(e)??{x1:0,x2:0,y1:0,y2:0},a=Math.atan2(o-i,n-t);this.context.beginPath(),this.context.globalAlpha=s,this.context.moveTo(n,o),this.context.lineTo(n-r.arrowSize*Math.cos(a-Math.PI/6),o-r.arrowSize*Math.sin(a-Math.PI/6)),this.context.lineTo(n-r.arrowSize*Math.cos(a+Math.PI/6),o-r.arrowSize*Math.sin(a+Math.PI/6)),this.context.closePath(),this.context.fillStyle=r.arrowColor,this.context.fill(),this.context.stroke()}r.drawExtraLink&&r.drawExtraLink(e,{...r,alpha:o},t)}}(e).bind(this)),i.forEach((t=>t())),n.forEach((t=>t())),this.context.restore(),this.listeners.onDrawFinished?.(e),t.bind(this)()}return this.graphSettings.showDrawTime?(n=e.bind(this),i=this.graphSettings.showDrawTimeEveryTick,()=>{const t=performance.now();n();const e=performance.now()-t;if(Xs+=e,Zs++,i){const t=Xs/Zs;console.log("average draw: ",t,"current draw: ",e)}}):e;var n,i}initResize(){if(!this.area)throw new Error("bad init data");let t=!0;const e=this.eventAbortController,n=new ResizeObserver((()=>{t?t=!1:e.signal.aborted?n.disconnect():requestAnimationFrame((()=>{this.updateSize()}))}));n.observe(this.area)}initPointer(){if(!this.area||!this.nodes||!this.simulation)throw new Error("bad init data");this.area.addEventListener("pointermove",(t=>{let e;this.graphSettings.highlightByHover&&!this.isDragging&&(e=js({graphSettings:this.graphSettings,areaRect:this.areaRect,areaTransform:this.areaTransform,mouseEvent:t,nodes:this.nodes}),e&&this.highlightedNode!==e?(this.highlightedNode=e,this.highlightedNeighbors=new Set(this.highlightedNode?.neighbors??[]),this.highlightWorking=!0,this.simulationWorking||this.highlightDrawing||requestAnimationFrame((()=>{this.draw()}))):!e&&this.highlightedNode&&(this.highlightWorking=!1,this.simulationWorking||this.highlightDrawing||requestAnimationFrame((()=>{this.draw()})))),this.listeners.onMove&&(e||(e=js({graphSettings:this.graphSettings,areaRect:this.areaRect,areaTransform:this.areaTransform,mouseEvent:t,nodes:this.nodes})),this.listeners.onMove(t,e))}),{signal:this.eventAbortController.signal}),this.area.addEventListener("dblclick",(t=>{if(!this.listeners.onDoubleClick)return;const e=js({graphSettings:this.graphSettings,areaRect:this.areaRect,areaTransform:this.areaTransform,mouseEvent:t,nodes:this.nodes});this.listeners.onDoubleClick(t,e)})),this.area.addEventListener("mousedown",(t=>{if(this.isDragging||!this.listeners.onWheelClick||1!==t.button)return;const e=js({graphSettings:this.graphSettings,areaRect:this.areaRect,areaTransform:this.areaTransform,mouseEvent:t,nodes:this.nodes});this.listeners.onWheelClick(t,e)}),{signal:this.eventAbortController.signal}),this.area.addEventListener("click",(t=>{if(this.isDragging||!this.listeners.onClick||0!==t.button)return;const e=js({graphSettings:this.graphSettings,areaRect:this.areaRect,areaTransform:this.areaTransform,mouseEvent:t,nodes:this.nodes});this.listeners.onClick(t,e)}),{signal:this.eventAbortController.signal}),this.area.addEventListener("contextmenu",(t=>{if(!this.listeners.onContextMenu)return;const e=js({graphSettings:this.graphSettings,areaRect:this.areaRect,areaTransform:this.areaTransform,mouseEvent:t,nodes:this.nodes});this.listeners.onContextMenu(t,e)}),{signal:this.eventAbortController.signal})}initDnd(){if(!this.area||!this.nodes||!this.simulation)throw new Error("bad init data");Si(this.area).call(function(){var t,e,n,i,r=Pi,o=Oi,s=Ii,a=Li,l={},u=ln("start","drag","end"),h=0,c=0;function f(t){t.on("mousedown.drag",d).filter(a).on("touchstart.drag",m).on("touchmove.drag",x,Ei).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(s,a){if(!i&&r.call(this,s,a)){var l=y(this,o.call(this,s,a),s,a,"mouse");l&&(Si(s.view).on("mousemove.drag",p,Ni).on("mouseup.drag",g,Ni),zi(s.view),Ri(s),n=!1,t=s.clientX,e=s.clientY,l("start",s))}}function p(i){if(Ci(i),!n){var r=i.clientX-t,o=i.clientY-e;n=r*r+o*o>c}l.mouse("drag",i)}function g(t){Si(t.view).on("mousemove.drag mouseup.drag",null),Mi(t.view,n),Ci(t),l.mouse("end",t)}function m(t,e){if(r.call(this,t,e)){var n,i,s=t.changedTouches,a=o.call(this,t,e),l=s.length;for(n=0;n<l;++n)(i=y(this,a,t,e,s[n].identifier,s[n]))&&(Ri(t),i("start",t,s[n]))}}function x(t){var e,n,i=t.changedTouches,r=i.length;for(e=0;e<r;++e)(n=l[i[e].identifier])&&(Ci(t),n("drag",t,i[e]))}function v(t){var e,n,r=t.changedTouches,o=r.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),e=0;e<o;++e)(n=l[r[e].identifier])&&(Ri(t),n("end",t,r[e]))}function y(t,e,n,i,r,o){var a,c,d,p=u.copy(),g=Ai(o||n,e);if(null!=(d=s.call(t,new Di("beforestart",{sourceEvent:n,target:f,identifier:r,active:h,x:g[0],y:g[1],dx:0,dy:0,dispatch:p}),i)))return a=d.x-g[0]||0,c=d.y-g[1]||0,function n(o,s,u){var m,x=g;switch(o){case"start":l[r]=n,m=h++;break;case"end":delete l[r],--h;case"drag":g=Ai(u||s,e),m=h}p.call(o,t,new Di(o,{sourceEvent:s,subject:d,target:f,identifier:r,active:m,x:g[0]+a,y:g[1]+c,dx:g[0]-x[0],dy:g[1]-x[1],dispatch:p}),i)}}return f.filter=function(t){return arguments.length?(r="function"==typeof t?t:$i(!!t),f):r},f.container=function(t){return arguments.length?(o="function"==typeof t?t:$i(t),f):o},f.subject=function(t){return arguments.length?(s="function"==typeof t?t:$i(t),f):s},f.touchable=function(t){return arguments.length?(a="function"==typeof t?t:$i(!!t),f):a},f.on=function(){var t=u.on.apply(u,arguments);return t===u?f:t},f.clickDistance=function(t){return arguments.length?(c=(t=+t)*t,f):Math.sqrt(c)},f}().subject((t=>{if(this.listeners.onDragSubject)return this.listeners.onDragSubject(t,this.state);if(!this.areaRect)return;const e=t.sourceEvent,[n,i]=Ws(e,this.areaRect,this.areaTransform);let r=0;return sn(this.nodes,(t=>{if(!t.x||!t.y||"boolean"==typeof t.drag&&!t.drag)return;let e=t._radius;if(!e){const n=Hs(t,r,this.nodes,this.state,this.nodeSettings.options??{},Ls);e=Fs({radiusFlexible:this.graphSettings.nodeRadiusFlexible,radiusInitial:n.radius??this.graphSettings.nodeRadiusInitial,radiusCoefficient:this.graphSettings.nodeRadiusCoefficient,radiusFactor:this.graphSettings.nodeRadiusFactor,linkCount:t.linkCount})}return r++,this.graphSettings.dragPlaceCoefficient(t,n,i,e)}))})).on("start",(t=>{this.listeners.onStartDragFinished?.(t,this.state)})).on("drag",(t=>{if(this.isDragging||(this.isDragging=!0,this.simulation&&this.simulation.alphaTarget(.3).restart()),!this.areaRect)return;const e=t.sourceEvent,[n,i]=Ws(e,this.areaRect,this.areaTransform);t.subject.fx=n,t.subject.fy=i,this.listeners.onMoveDragFinished?.(t,this.state)})).on("end",(t=>{if(this.isDragging=!1,!t.active&&this.simulation&&this.simulation.alphaTarget(0),this.graphSettings.stickAfterDrag&&this.areaRect){if(!this.areaRect)return;const e=t.sourceEvent,[n,i]=Ws(e,this.areaRect,this.areaTransform);t.subject.fx=n,t.subject.fy=i}else t.subject.fx=null,t.subject.fy=null;this.listeners.onEndDragFinished?.(t,this.state)})))}initZoom(t){if(!this.area)throw new Error("bad init data");const e=hs().scaleExtent(this.graphSettings.zoomExtent).on("zoom",(t=>{this.listeners.onZoom?.(t),this.areaTransform=t.transform,this.linkOptionsCache={},this.nodeOptionsCache={},this.simulationWorking||this.highlightWorking||requestAnimationFrame((()=>this.draw()))}));if(this.graphSettings.translateExtentEnable){const t=this.graphSettings.translateExtentCoefficient,[i,r]=(n=t,Boolean(n&&Array.isArray(n))?t:[t,t]),[[o=-this.width*i,s=-this.height*r],[a=this.width*i,l=this.height*r]]=this.graphSettings.translateExtent;e.translateExtent([[o,s],[a,l]])}var n;Si(this.area).call(e).on("dblclick.zoom",null);const i=t??this.graphSettings.zoomInitial;this.areaTransform=new ts(i?.k??1,i?.x??this.width/2,i?.y??this.height/2),hs().transform(Si(this.area),this.areaTransform)}}function Qs(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}const Ks="flex-module_flex__xOhN8",Js="flex-module_wide__4-uAQ",ta="flex-module_full__NSW6N",ea="flex-module_vertical__2beOI";Qs(".flex-module_flex__xOhN8{display:flex}.flex-module_wide__4-uAQ{width:100%}.flex-module_full__NSW6N{height:100%}.flex-module_vertical__2beOI{flex-direction:column}");var na=we("<div><!></div>");function ia(t,e){z(e,!0);let n=Je(e,"instance",15),i=new Proxy({props:e,exclude:["$$slots","$$events","$$legacy","children","vertical","wide","full","gap","align","justify","instance","onclick"]},Ke);var r=na(),o=t=>{e.onclick&&"Enter"===t.key&&n()&&n().click()};let s;!function(t,e,...n){var i,r=t,o=h;st((()=>{o!==(o=e())&&(i&&(ht(i),i=null),i=at((()=>o(r,...n))))}),w)}(Z(r),(()=>e.children??h)),je(r,(t=>n(t)),(()=>n())),ot((()=>{s=function(t,e,n,i,r=!1,o=!1){var s=e||{},a="OPTION"===t.tagName;for(var l in e)l in n||(n[l]=null);n.class&&(n.class=De(n.class));var u=Le(t),h=t.__attributes??={};for(const m in n){let x=n[m];if(a&&"value"===m&&null==x)t.value=t.__value="",s[m]=x;else{var c=s[m];if(x!==c){s[m]=x;var f=m[0]+m[1];if("$$"!==f){if("on"===f){const v={},y="$$"+m;let w=m.slice(2);var d=ae(w);if(oe(w)&&(w=w.slice(0,-7),v.capture=!0),!d&&c){if(null!=x)continue;t.removeEventListener(w,s[y],v),s[y]=null}if(null!=x)if(d)t[`__${w}`]=x,me([w]);else{function b(t){s[m].call(this,t)}s[y]=ge(w,t,b,v)}else d&&(t[`__${w}`]=void 0)}else if("style"===m&&null!=x)t.style.cssText=x+"";else if("autofocus"===m)fe(t,Boolean(x));else if(o||"__value"!==m&&("value"!==m||null==x))if("selected"===m&&a)Pe(t,x);else{var p=m;r||(p=ue(p));var g="defaultValue"===p||"defaultChecked"===p;if(null!=x||o||g)g||u.includes(p)&&(o||"string"!=typeof x)?t[p]=x:"function"!=typeof x&&Oe(t,p,x);else if(h[m]=null,"value"===p||"checked"===p){let _=t;const k=void 0===e;if("value"===p){let S=_.defaultValue;_.removeAttribute(p),_.defaultValue=S,_.value=_.__value=k?S:null}else{let T=_.defaultChecked;_.removeAttribute(p),_.defaultChecked=T,_.checked=!!k&&T}}else t.removeAttribute(m)}else t.value=t.__value=x;"style"===m&&"__styles"in t&&(t.__styles={})}}}}return s}(r,s,{...i,class:[Ks,e.wide&&Js,e.full&&ta,e.vertical&&ea,e.class],onclick:e.onclick,onkeydown:o,role:e.onclick?"button":void 0,tabindex:e.onclick?0:null}),We(r,"gap",e.gap+"px"),We(r,"align-items",e.align),We(r,"justify-content",e.justify)})),_e(t,r),M()}const ra="graph-module_container__y9R2M",oa="graph-module_graph__Fzxes";Qs(".graph-module_container__y9R2M{display:flex;height:100%;position:relative;width:100%}.graph-module_graph__Fzxes{height:100%;left:0;position:absolute;top:0;width:100%;z-index:1}");const sa=Ye([]),aa=Ye([]),la=Ye(),ua=Ye();const ha="description-module_base__k7o4P",ca="description-module_base__open__J1hTK",fa="description-module_close__Bzb--",da="description-module_derived__G-swT",pa="description-module_text__RdCQd",ga="description-module_link__PUZ5h",ma="description-module_title__nUEbl",xa="description-module_header__RXjEH",va="description-module_content__J3LR0",ya="description-module_footer__tVrvt";Qs(".description-module_base__k7o4P{background-color:#21252d;border-bottom-left-radius:16px;border-bottom-right-radius:2px;border-top-left-radius:16px;border-top-right-radius:2px;color:#fff;font-family:Nunito;font-size:18px;font-weight:400;height:calc(100% - 8px);letter-spacing:0;line-height:120%;opacity:0;overflow:hidden;position:absolute;right:4px;top:4px;transition:opacity .1s ease;visibility:hidden;width:400px;z-index:2}.description-module_base__open__J1hTK{opacity:1;visibility:visible}.description-module_close__Bzb--{background-color:transparent;border:none;color:#fff;cursor:pointer;outline:none;position:absolute;right:15px;top:15px}.description-module_derived__G-swT{background-color:#fff;height:1px;min-height:1px;opacity:20%;width:100%}.description-module_text__RdCQd{word-wrap:break-word;max-width:100%;opacity:80%}.description-module_text__RdCQd p{margin:0;padding:0 0 20px}.description-module_text__RdCQd ul{margin:0;padding:0 0 20px 40px}.description-module_link__PUZ5h{background-color:transparent;border:none;color:#fff;cursor:pointer;font-size:18px;font-style:normal;font-weight:400;line-height:120%;outline:none;text-align:left;text-decoration-line:underline;text-decoration-skip-ink:none;text-decoration-style:solid;text-decoration-thickness:auto;text-underline-offset:auto;text-underline-position:from-font}.description-module_title__nUEbl{color:#fcfcfe;font-size:24px;font-weight:600;line-height:100%;width:289px}.description-module_header__RXjEH{padding:24px 77px 16px 30px}.description-module_content__J3LR0{height:100%;min-height:200px;overflow:auto;padding:16px 50px 0 30px}.description-module_footer__tVrvt{height:100%;min-height:200px;overflow:auto;padding:30px 24px 20px 30px}");var wa=function(t,e,n="svg"){var i,r=`<${n}>${!t.startsWith("<!>")?t:"<!>"+t}</${n}>`;return()=>{if(!i){var t=G(ve(r));i=G(t)}var e=i.cloneNode(!0);return ye(e,e),e}}('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"></path></svg>');function ba(t,e){const n=Je(e,"color",3,"currentColor"),i=Je(e,"size",3,16),r=Je(e,"sizeX",19,i),o=Je(e,"sizeY",19,i);var s=wa();ot((()=>{var t,i,a,l;Oe(s,"width",r()),Oe(s,"height",o()),Oe(s,"fill",n()),Oe(s,"style",`max-width: $${r()??""}; min-width: $${r()??""}; width: $${r()??""}; max-height: $${o()??""}; min-height: $${o()??""}; height: $${o()??""};`),t=s,i=De(e.className),a=t.__className,l=Be(i),a!==l&&(""===l?t.removeAttribute("class"):t.setAttribute("class",l),t.__className=l)})),_e(t,s)}
/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:_a,setPrototypeOf:ka,isFrozen:Sa,getPrototypeOf:Ta,getOwnPropertyDescriptor:Aa}=Object;let{freeze:Ea,seal:Na,create:Ra}=Object,{apply:Ca,construct:za}="undefined"!=typeof Reflect&&Reflect;Ea||(Ea=function(t){return t}),Na||(Na=function(t){return t}),Ca||(Ca=function(t,e,n){return t.apply(e,n)}),za||(za=function(t,e){return new t(...e)});const Ma=Ga(Array.prototype.forEach),$a=Ga(Array.prototype.lastIndexOf),Da=Ga(Array.prototype.pop),Pa=Ga(Array.prototype.push),Oa=Ga(Array.prototype.splice),Ia=Ga(String.prototype.toLowerCase),La=Ga(String.prototype.toString),Fa=Ga(String.prototype.match),Ba=Ga(String.prototype.replace),Wa=Ga(String.prototype.indexOf),qa=Ga(String.prototype.trim),ja=Ga(Object.prototype.hasOwnProperty),Ha=Ga(RegExp.prototype.test),Ua=(Ya=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return za(Ya,e)});var Ya;function Ga(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return Ca(t,e,i)}}function Xa(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ia;ka&&ka(t,null);let i=e.length;for(;i--;){let r=e[i];if("string"==typeof r){const t=n(r);t!==r&&(Sa(e)||(e[i]=t),r=t)}t[r]=!0}return t}function Za(t){for(let e=0;e<t.length;e++){ja(t,e)||(t[e]=null)}return t}function Va(t){const e=Ra(null);for(const[n,i]of _a(t)){ja(t,n)&&(Array.isArray(i)?e[n]=Za(i):i&&"object"==typeof i&&i.constructor===Object?e[n]=Va(i):e[n]=i)}return e}function Qa(t,e){for(;null!==t;){const n=Aa(t,e);if(n){if(n.get)return Ga(n.get);if("function"==typeof n.value)return Ga(n.value)}t=Ta(t)}return function(){return null}}const Ka=Ea(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ja=Ea(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),tl=Ea(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),el=Ea(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),nl=Ea(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),il=Ea(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),rl=Ea(["#text"]),ol=Ea(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),sl=Ea(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),al=Ea(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ll=Ea(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ul=Na(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hl=Na(/<%[\w\W]*|[\w\W]*%>/gm),cl=Na(/\$\{[\w\W]*/gm),fl=Na(/^data-[\-\w.\u00B7-\uFFFF]+$/),dl=Na(/^aria-[\-\w]+$/),pl=Na(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),gl=Na(/^(?:\w+script|data):/i),ml=Na(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),xl=Na(/^html$/i),vl=Na(/^[a-z][.\w]*(-[.\w]+)+$/i);var yl=Object.freeze({__proto__:null,ARIA_ATTR:dl,ATTR_WHITESPACE:ml,CUSTOM_ELEMENT:vl,DATA_ATTR:fl,DOCTYPE_NAME:xl,ERB_EXPR:hl,IS_ALLOWED_URI:pl,IS_SCRIPT_OR_DATA:gl,MUSTACHE_EXPR:ul,TMPLIT_EXPR:cl});const wl=1,bl=3,_l=7,kl=8,Sl=9,Tl=function(){return"undefined"==typeof window?null:window};var Al=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tl();const n=e=>t(e);if(n.version="3.2.4",n.removed=[],!e||!e.document||e.document.nodeType!==Sl||!e.Element)return n.isSupported=!1,n;let{document:i}=e;const r=i,o=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:l,Element:u,NodeFilter:h,NamedNodeMap:c=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:d,trustedTypes:p}=e,g=u.prototype,m=Qa(g,"cloneNode"),x=Qa(g,"remove"),v=Qa(g,"nextSibling"),y=Qa(g,"childNodes"),w=Qa(g,"parentNode");if("function"==typeof a){const t=i.createElement("template");t.content&&t.content.ownerDocument&&(i=t.content.ownerDocument)}let b,_="";const{implementation:k,createNodeIterator:S,createDocumentFragment:T,getElementsByTagName:A}=i,{importNode:E}=r;let N={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof _a&&"function"==typeof w&&k&&void 0!==k.createHTMLDocument;const{MUSTACHE_EXPR:R,ERB_EXPR:C,TMPLIT_EXPR:z,DATA_ATTR:M,ARIA_ATTR:$,IS_SCRIPT_OR_DATA:D,ATTR_WHITESPACE:P,CUSTOM_ELEMENT:O}=yl;let{IS_ALLOWED_URI:I}=yl,L=null;const F=Xa({},[...Ka,...Ja,...tl,...nl,...rl]);let B=null;const W=Xa({},[...ol,...sl,...al,...ll]);let q=Object.seal(Ra(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),j=null,H=null,U=!0,Y=!0,G=!1,X=!0,Z=!1,V=!0,Q=!1,K=!1,J=!1,tt=!1,et=!1,nt=!1,it=!0,rt=!1,ot=!0,st=!1,at={},lt=null;const ut=Xa({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ht=null;const ct=Xa({},["audio","video","img","source","image","track"]);let ft=null;const dt=Xa({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pt="http://www.w3.org/1998/Math/MathML",gt="http://www.w3.org/2000/svg",mt="http://www.w3.org/1999/xhtml";let xt=mt,vt=!1,yt=null;const wt=Xa({},[pt,gt,mt],La);let bt=Xa({},["mi","mo","mn","ms","mtext"]),_t=Xa({},["annotation-xml"]);const kt=Xa({},["title","style","font","a","script"]);let St=null;const Tt=["application/xhtml+xml","text/html"];let At=null,Et=null;const Nt=i.createElement("form"),Rt=function(t){return t instanceof RegExp||t instanceof Function},Ct=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Et||Et!==t){if(t&&"object"==typeof t||(t={}),t=Va(t),St=-1===Tt.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,At="application/xhtml+xml"===St?La:Ia,L=ja(t,"ALLOWED_TAGS")?Xa({},t.ALLOWED_TAGS,At):F,B=ja(t,"ALLOWED_ATTR")?Xa({},t.ALLOWED_ATTR,At):W,yt=ja(t,"ALLOWED_NAMESPACES")?Xa({},t.ALLOWED_NAMESPACES,La):wt,ft=ja(t,"ADD_URI_SAFE_ATTR")?Xa(Va(dt),t.ADD_URI_SAFE_ATTR,At):dt,ht=ja(t,"ADD_DATA_URI_TAGS")?Xa(Va(ct),t.ADD_DATA_URI_TAGS,At):ct,lt=ja(t,"FORBID_CONTENTS")?Xa({},t.FORBID_CONTENTS,At):ut,j=ja(t,"FORBID_TAGS")?Xa({},t.FORBID_TAGS,At):{},H=ja(t,"FORBID_ATTR")?Xa({},t.FORBID_ATTR,At):{},at=!!ja(t,"USE_PROFILES")&&t.USE_PROFILES,U=!1!==t.ALLOW_ARIA_ATTR,Y=!1!==t.ALLOW_DATA_ATTR,G=t.ALLOW_UNKNOWN_PROTOCOLS||!1,X=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Z=t.SAFE_FOR_TEMPLATES||!1,V=!1!==t.SAFE_FOR_XML,Q=t.WHOLE_DOCUMENT||!1,tt=t.RETURN_DOM||!1,et=t.RETURN_DOM_FRAGMENT||!1,nt=t.RETURN_TRUSTED_TYPE||!1,J=t.FORCE_BODY||!1,it=!1!==t.SANITIZE_DOM,rt=t.SANITIZE_NAMED_PROPS||!1,ot=!1!==t.KEEP_CONTENT,st=t.IN_PLACE||!1,I=t.ALLOWED_URI_REGEXP||pl,xt=t.NAMESPACE||mt,bt=t.MATHML_TEXT_INTEGRATION_POINTS||bt,_t=t.HTML_INTEGRATION_POINTS||_t,q=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&Rt(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&Rt(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(q.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Z&&(Y=!1),et&&(tt=!0),at&&(L=Xa({},rl),B=[],!0===at.html&&(Xa(L,Ka),Xa(B,ol)),!0===at.svg&&(Xa(L,Ja),Xa(B,sl),Xa(B,ll)),!0===at.svgFilters&&(Xa(L,tl),Xa(B,sl),Xa(B,ll)),!0===at.mathMl&&(Xa(L,nl),Xa(B,al),Xa(B,ll))),t.ADD_TAGS&&(L===F&&(L=Va(L)),Xa(L,t.ADD_TAGS,At)),t.ADD_ATTR&&(B===W&&(B=Va(B)),Xa(B,t.ADD_ATTR,At)),t.ADD_URI_SAFE_ATTR&&Xa(ft,t.ADD_URI_SAFE_ATTR,At),t.FORBID_CONTENTS&&(lt===ut&&(lt=Va(lt)),Xa(lt,t.FORBID_CONTENTS,At)),ot&&(L["#text"]=!0),Q&&Xa(L,["html","head","body"]),L.table&&(Xa(L,["tbody"]),delete j.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw Ua('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw Ua('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=t.TRUSTED_TYPES_POLICY,_=b.createHTML("")}else void 0===b&&(b=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";e&&e.hasAttribute(i)&&(n=e.getAttribute(i));const r="dompurify"+(n?"#"+n:"");try{return t.createPolicy(r,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(p,o)),null!==b&&"string"==typeof _&&(_=b.createHTML(""));Ea&&Ea(t),Et=t}},zt=Xa({},[...Ja,...tl,...el]),Mt=Xa({},[...nl,...il]),$t=function(t){Pa(n.removed,{element:t});try{w(t).removeChild(t)}catch(e){x(t)}},Dt=function(t,e){try{Pa(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){Pa(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t)if(tt||et)try{$t(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},Pt=function(t){let e=null,n=null;if(J)t="<remove></remove>"+t;else{const e=Fa(t,/^[\r\n\t ]+/);n=e&&e[0]}"application/xhtml+xml"===St&&xt===mt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const r=b?b.createHTML(t):t;if(xt===mt)try{e=(new d).parseFromString(r,St)}catch(t){}if(!e||!e.documentElement){e=k.createDocument(xt,"template",null);try{e.documentElement.innerHTML=vt?_:r}catch(t){}}const o=e.body||e.documentElement;return t&&n&&o.insertBefore(i.createTextNode(n),o.childNodes[0]||null),xt===mt?A.call(e,Q?"html":"body")[0]:Q?e.documentElement:o},Ot=function(t){return S.call(t.ownerDocument||t,t,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},It=function(t){return t instanceof f&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof c)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},Lt=function(t){return"function"==typeof l&&t instanceof l};function Ft(t,e,i){Ma(t,(t=>{t.call(n,e,i,Et)}))}const Bt=function(t){let e=null;if(Ft(N.beforeSanitizeElements,t,null),It(t))return $t(t),!0;const i=At(t.nodeName);if(Ft(N.uponSanitizeElement,t,{tagName:i,allowedTags:L}),t.hasChildNodes()&&!Lt(t.firstElementChild)&&Ha(/<[/\w]/g,t.innerHTML)&&Ha(/<[/\w]/g,t.textContent))return $t(t),!0;if(t.nodeType===_l)return $t(t),!0;if(V&&t.nodeType===kl&&Ha(/<[/\w]/g,t.data))return $t(t),!0;if(!L[i]||j[i]){if(!j[i]&&qt(i)){if(q.tagNameCheck instanceof RegExp&&Ha(q.tagNameCheck,i))return!1;if(q.tagNameCheck instanceof Function&&q.tagNameCheck(i))return!1}if(ot&&!lt[i]){const e=w(t)||t.parentNode,n=y(t)||t.childNodes;if(n&&e){for(let i=n.length-1;i>=0;--i){const r=m(n[i],!0);r.__removalCount=(t.__removalCount||0)+1,e.insertBefore(r,v(t))}}}return $t(t),!0}return t instanceof u&&!function(t){let e=w(t);e&&e.tagName||(e={namespaceURI:xt,tagName:"template"});const n=Ia(t.tagName),i=Ia(e.tagName);return!!yt[t.namespaceURI]&&(t.namespaceURI===gt?e.namespaceURI===mt?"svg"===n:e.namespaceURI===pt?"svg"===n&&("annotation-xml"===i||bt[i]):Boolean(zt[n]):t.namespaceURI===pt?e.namespaceURI===mt?"math"===n:e.namespaceURI===gt?"math"===n&&_t[i]:Boolean(Mt[n]):t.namespaceURI===mt?!(e.namespaceURI===gt&&!_t[i])&&!(e.namespaceURI===pt&&!bt[i])&&!Mt[n]&&(kt[n]||!zt[n]):!("application/xhtml+xml"!==St||!yt[t.namespaceURI]))}(t)?($t(t),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!Ha(/<\/no(script|embed|frames)/i,t.innerHTML)?(Z&&t.nodeType===bl&&(e=t.textContent,Ma([R,C,z],(t=>{e=Ba(e,t," ")})),t.textContent!==e&&(Pa(n.removed,{element:t.cloneNode()}),t.textContent=e)),Ft(N.afterSanitizeElements,t,null),!1):($t(t),!0)},Wt=function(t,e,n){if(it&&("id"===e||"name"===e)&&(n in i||n in Nt))return!1;if(Y&&!H[e]&&Ha(M,e));else if(U&&Ha($,e));else if(!B[e]||H[e]){if(!(qt(t)&&(q.tagNameCheck instanceof RegExp&&Ha(q.tagNameCheck,t)||q.tagNameCheck instanceof Function&&q.tagNameCheck(t))&&(q.attributeNameCheck instanceof RegExp&&Ha(q.attributeNameCheck,e)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(e))||"is"===e&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&Ha(q.tagNameCheck,n)||q.tagNameCheck instanceof Function&&q.tagNameCheck(n))))return!1}else if(ft[e]);else if(Ha(I,Ba(n,P,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==Wa(n,"data:")||!ht[t]){if(G&&!Ha(D,Ba(n,P,"")));else if(n)return!1}else;return!0},qt=function(t){return"annotation-xml"!==t&&Fa(t,O)},jt=function(t){Ft(N.beforeSanitizeAttributes,t,null);const{attributes:e}=t;if(!e||It(t))return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B,forceKeepAttr:void 0};let r=e.length;for(;r--;){const o=e[r],{name:s,namespaceURI:a,value:l}=o,u=At(s);let h="value"===s?l:qa(l);if(i.attrName=u,i.attrValue=h,i.keepAttr=!0,i.forceKeepAttr=void 0,Ft(N.uponSanitizeAttribute,t,i),h=i.attrValue,!rt||"id"!==u&&"name"!==u||(Dt(s,t),h="user-content-"+h),V&&Ha(/((--!?|])>)|<\/(style|title)/i,h)){Dt(s,t);continue}if(i.forceKeepAttr)continue;if(Dt(s,t),!i.keepAttr)continue;if(!X&&Ha(/\/>/i,h)){Dt(s,t);continue}Z&&Ma([R,C,z],(t=>{h=Ba(h,t," ")}));const c=At(t.nodeName);if(Wt(c,u,h)){if(b&&"object"==typeof p&&"function"==typeof p.getAttributeType)if(a);else switch(p.getAttributeType(c,u)){case"TrustedHTML":h=b.createHTML(h);break;case"TrustedScriptURL":h=b.createScriptURL(h)}try{a?t.setAttributeNS(a,s,h):t.setAttribute(s,h),It(t)?$t(t):Da(n.removed)}catch(t){}}}Ft(N.afterSanitizeAttributes,t,null)},Ht=function t(e){let n=null;const i=Ot(e);for(Ft(N.beforeSanitizeShadowDOM,e,null);n=i.nextNode();)Ft(N.uponSanitizeShadowNode,n,null),Bt(n),jt(n),n.content instanceof s&&t(n.content);Ft(N.afterSanitizeShadowDOM,e,null)};return n.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,o=null,a=null,u=null;if(vt=!t,vt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!Lt(t)){if("function"!=typeof t.toString)throw Ua("toString is not a function");if("string"!=typeof(t=t.toString()))throw Ua("dirty is not a string, aborting")}if(!n.isSupported)return t;if(K||Ct(e),n.removed=[],"string"==typeof t&&(st=!1),st){if(t.nodeName){const e=At(t.nodeName);if(!L[e]||j[e])throw Ua("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof l)i=Pt("\x3c!----\x3e"),o=i.ownerDocument.importNode(t,!0),o.nodeType===wl&&"BODY"===o.nodeName||"HTML"===o.nodeName?i=o:i.appendChild(o);else{if(!tt&&!Z&&!Q&&-1===t.indexOf("<"))return b&&nt?b.createHTML(t):t;if(i=Pt(t),!i)return tt?null:nt?_:""}i&&J&&$t(i.firstChild);const h=Ot(st?t:i);for(;a=h.nextNode();)Bt(a),jt(a),a.content instanceof s&&Ht(a.content);if(st)return t;if(tt){if(et)for(u=T.call(i.ownerDocument);i.firstChild;)u.appendChild(i.firstChild);else u=i;return(B.shadowroot||B.shadowrootmode)&&(u=E.call(r,u,!0)),u}let c=Q?i.outerHTML:i.innerHTML;return Q&&L["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&Ha(xl,i.ownerDocument.doctype.name)&&(c="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+c),Z&&Ma([R,C,z],(t=>{c=Ba(c,t," ")})),b&&nt?b.createHTML(c):c},n.setConfig=function(){Ct(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),K=!0},n.clearConfig=function(){Et=null,K=!1},n.isValidAttribute=function(t,e,n){Et||Ct({});const i=At(t),r=At(e);return Wt(i,r,n)},n.addHook=function(t,e){"function"==typeof e&&Pa(N[t],e)},n.removeHook=function(t,e){if(void 0!==e){const n=$a(N[t],e);return-1===n?void 0:Oa(N[t],n,1)[0]}return Da(N[t])},n.removeHooks=function(t){N[t]=[]},n.removeAllHooks=function(){N={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();function El(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Nl={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function Rl(t){Nl=t}const Cl={exec:()=>null};function zl(t,e=""){let n="string"==typeof t?t:t.source;const i={replace:(t,e)=>{let r="string"==typeof e?e:e.source;return r=r.replace(Ml.caret,"$1"),n=n.replace(t,r),i},getRegex:()=>new RegExp(n,e)};return i}const Ml={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},$l=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Dl=/(?:[*+-]|\d{1,9}[.)])/,Pl=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Ol=zl(Pl).replace(/bull/g,Dl).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Il=zl(Pl).replace(/bull/g,Dl).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Ll=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Fl=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Bl=zl(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Fl).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Wl=zl(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Dl).getRegex(),ql="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",jl=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Hl=zl("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",jl).replace("tag",ql).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ul=zl(Ll).replace("hr",$l).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ql).getRegex(),Yl={blockquote:zl(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ul).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:Bl,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:$l,html:Hl,lheading:Ol,list:Wl,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:Ul,table:Cl,text:/^[^\n]+/},Gl=zl("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",$l).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ql).getRegex(),Xl={...Yl,lheading:Il,table:Gl,paragraph:zl(Ll).replace("hr",$l).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Gl).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ql).getRegex()},Zl={...Yl,html:zl("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",jl).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Cl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:zl(Ll).replace("hr",$l).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Ol).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Vl=/^( {2,}|\\)\n(?!\s*$)/,Ql=/[\p{P}\p{S}]/u,Kl=/[\s\p{P}\p{S}]/u,Jl=/[^\s\p{P}\p{S}]/u,tu=zl(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Kl).getRegex(),eu=/(?!~)[\p{P}\p{S}]/u,nu=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,iu=zl(nu,"u").replace(/punct/g,Ql).getRegex(),ru=zl(nu,"u").replace(/punct/g,eu).getRegex(),ou="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",su=zl(ou,"gu").replace(/notPunctSpace/g,Jl).replace(/punctSpace/g,Kl).replace(/punct/g,Ql).getRegex(),au=zl(ou,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,eu).getRegex(),lu=zl("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Jl).replace(/punctSpace/g,Kl).replace(/punct/g,Ql).getRegex(),uu=zl(/\\(punct)/,"gu").replace(/punct/g,Ql).getRegex(),hu=zl(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),cu=zl(jl).replace("(?:--\x3e|$)","--\x3e").getRegex(),fu=zl("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",cu).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),du=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,pu=zl(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",du).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),gu=zl(/^!?\[(label)\]\[(ref)\]/).replace("label",du).replace("ref",Fl).getRegex(),mu=zl(/^!?\[(ref)\](?:\[\])?/).replace("ref",Fl).getRegex(),xu={_backpedal:Cl,anyPunctuation:uu,autolink:hu,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:Vl,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Cl,emStrongLDelim:iu,emStrongRDelimAst:su,emStrongRDelimUnd:lu,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:pu,nolink:mu,punctuation:tu,reflink:gu,reflinkSearch:zl("reflink|nolink(?!\\()","g").replace("reflink",gu).replace("nolink",mu).getRegex(),tag:fu,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Cl},vu={...xu,link:zl(/^!?\[(label)\]\((.*?)\)/).replace("label",du).getRegex(),reflink:zl(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",du).getRegex()},yu={...xu,emStrongRDelimAst:au,emStrongLDelim:ru,url:zl(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},wu={...yu,br:zl(Vl).replace("{2,}","*").getRegex(),text:zl(yu.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},bu={normal:Yl,gfm:Xl,pedantic:Zl},_u={normal:xu,gfm:yu,breaks:wu,pedantic:vu},ku={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Su=t=>ku[t];function Tu(t,e){if(e){if(Ml.escapeTest.test(t))return t.replace(Ml.escapeReplace,Su)}else if(Ml.escapeTestNoEncode.test(t))return t.replace(Ml.escapeReplaceNoEncode,Su);return t}function Au(t){try{t=encodeURI(t).replace(Ml.percentDecode,"%")}catch{return null}return t}function Eu(t,e){const n=t.replace(Ml.findPipe,((t,e,n)=>{let i=!1,r=e;for(;--r>=0&&"\\"===n[r];)i=!i;return i?"|":" |"})).split(Ml.splitPipe);let i=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(Ml.slashPipe,"|");return n}function Nu(t,e,n){const i=t.length;if(0===i)return"";let r=0;for(;r<i;){if(t.charAt(i-r-1)!==e)break;r++}return t.slice(0,i-r)}function Ru(t,e,n,i,r){const o=e.href,s=e.title||null,a=t[1].replace(r.other.outputLinkReplace,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;const t={type:"link",raw:n,href:o,title:s,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,t}return{type:"image",raw:n,href:o,title:s,text:a}}class Cu{options;rules;lexer;constructor(t){this.options=t||Nl}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Nu(t,"\n")}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const t=e[0],n=function(t,e,n){const i=t.match(n.other.indentCodeCompensation);if(null===i)return e;const r=i[1];return e.split("\n").map((t=>{const e=t.match(n.other.beginningSpace);if(null===e)return t;const[i]=e;return i.length>=r.length?t.slice(r.length):t})).join("\n")}(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){const e=Nu(t,"#");this.options.pedantic?t=e.trim():e&&!this.rules.other.endingSpaceChar.test(e)||(t=e.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:Nu(e[0],"\n")}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let t=Nu(e[0],"\n").split("\n"),n="",i="";const r=[];for(;t.length>0;){let e=!1;const o=[];let s;for(s=0;s<t.length;s++)if(this.rules.other.blockquoteStart.test(t[s]))o.push(t[s]),e=!0;else{if(e)break;o.push(t[s])}t=t.slice(s);const a=o.join("\n"),l=a.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}\n${a}`:a,i=i?`${i}\n${l}`:l;const u=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,r,!0),this.lexer.state.top=u,0===t.length)break;const h=r.at(-1);if("code"===h?.type)break;if("blockquote"===h?.type){const e=h,o=e.raw+"\n"+t.join("\n"),s=this.blockquote(o);r[r.length-1]=s,n=n.substring(0,n.length-e.raw.length)+s.raw,i=i.substring(0,i.length-e.text.length)+s.text;break}if("list"!==h?.type);else{const e=h,o=e.raw+"\n"+t.join("\n"),s=this.list(o);r[r.length-1]=s,n=n.substring(0,n.length-h.raw.length)+s.raw,i=i.substring(0,i.length-e.raw.length)+s.raw,t=o.substring(r.at(-1).raw.length).split("\n")}}return{type:"blockquote",raw:n,tokens:r,text:i}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const i=n.length>1,r={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const o=this.rules.other.listItemRegex(n);let s=!1;for(;t;){let n=!1,i="",a="";if(!(e=o.exec(t)))break;if(this.rules.block.hr.test(t))break;i=e[0],t=t.substring(i.length);let l=e[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,(t=>" ".repeat(3*t.length))),u=t.split("\n",1)[0],h=!l.trim(),c=0;if(this.options.pedantic?(c=2,a=l.trimStart()):h?c=e[1].length+1:(c=e[2].search(this.rules.other.nonSpaceChar),c=c>4?1:c,a=l.slice(c),c+=e[1].length),h&&this.rules.other.blankLine.test(u)&&(i+=u+"\n",t=t.substring(u.length+1),n=!0),!n){const e=this.rules.other.nextBulletRegex(c),n=this.rules.other.hrRegex(c),r=this.rules.other.fencesBeginRegex(c),o=this.rules.other.headingBeginRegex(c),s=this.rules.other.htmlBeginRegex(c);for(;t;){const f=t.split("\n",1)[0];let d;if(u=f,this.options.pedantic?(u=u.replace(this.rules.other.listReplaceNesting,"  "),d=u):d=u.replace(this.rules.other.tabCharGlobal,"    "),r.test(u))break;if(o.test(u))break;if(s.test(u))break;if(e.test(u))break;if(n.test(u))break;if(d.search(this.rules.other.nonSpaceChar)>=c||!u.trim())a+="\n"+d.slice(c);else{if(h)break;if(l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4)break;if(r.test(l))break;if(o.test(l))break;if(n.test(l))break;a+="\n"+u}h||u.trim()||(h=!0),i+=f+"\n",t=t.substring(f.length+1),l=d.slice(c)}}r.loose||(s?r.loose=!0:this.rules.other.doubleBlankLine.test(i)&&(s=!0));let f,d=null;this.options.gfm&&(d=this.rules.other.listIsTask.exec(a),d&&(f="[ ] "!==d[0],a=a.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:i,task:!!d,checked:f,loose:!1,text:a,tokens:[]}),r.raw+=i}const a=r.items.at(-1);if(!a)return;a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd(),r.raw=r.raw.trimEnd();for(let t=0;t<r.items.length;t++)if(this.lexer.state.top=!1,r.items[t].tokens=this.lexer.blockTokens(r.items[t].text,[]),!r.loose){const e=r.items[t].tokens.filter((t=>"space"===t.type)),n=e.length>0&&e.some((t=>this.rules.other.anyLine.test(t.raw)));r.loose=n}if(r.loose)for(let t=0;t<r.items.length;t++)r.items[t].loose=!0;return r}}html(t){const e=this.rules.block.html.exec(t);if(e){return{type:"html",block:!0,raw:e[0],pre:"pre"===e[1]||"script"===e[1]||"style"===e[1],text:e[0]}}}def(t){const e=this.rules.block.def.exec(t);if(e){const t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:i}}}table(t){const e=this.rules.block.table.exec(t);if(!e)return;if(!this.rules.other.tableDelimiter.test(e[2]))return;const n=Eu(e[1]),i=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===i.length){for(const t of i)this.rules.other.tableAlignRight.test(t)?o.align.push("right"):this.rules.other.tableAlignCenter.test(t)?o.align.push("center"):this.rules.other.tableAlignLeft.test(t)?o.align.push("left"):o.align.push(null);for(let t=0;t<n.length;t++)o.header.push({text:n[t],tokens:this.lexer.inline(n[t]),header:!0,align:o.align[t]});for(const t of r)o.rows.push(Eu(t,o.header.length).map(((t,e)=>({text:t,tokens:this.lexer.inline(t),header:!1,align:o.align[e]}))));return o}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const t="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;const e=Nu(t.slice(0,-1),"\\");if((t.length-e.length)%2==0)return}else{const t=function(t,e){if(-1===t.indexOf(e[1]))return-1;let n=0;for(let i=0;i<t.length;i++)if("\\"===t[i])i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return-1}(e[2],"()");if(t>-1){const n=(0===e[0].indexOf("!")?5:4)+e[1].length+t;e[2]=e[2].substring(0,t),e[0]=e[0].substring(0,n).trim(),e[3]=""}}let n=e[2],i="";if(this.options.pedantic){const t=this.rules.other.pedanticHrefTitle.exec(n);t&&(n=t[1],i=t[3])}else i=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(n=this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?n.slice(1):n.slice(1,-1)),Ru(e,{href:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n,title:i?i.replace(this.rules.inline.anyPunctuation,"$1"):i},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const t=e[(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!t){const t=n[0].charAt(0);return{type:"text",raw:t,text:t}}return Ru(n,t,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!i)return;if(i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const n=[...i[0]].length-1;let r,o,s=n,a=0;const l="*"===i[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,e=e.slice(-1*t.length+n);null!=(i=l.exec(e));){if(r=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!r)continue;if(o=[...r].length,i[3]||i[4]){s+=o;continue}if((i[5]||i[6])&&n%3&&!((n+o)%3)){a+=o;continue}if(s-=o,s>0)continue;o=Math.min(o,o+s+a);const e=[...i[0]][0].length,l=t.slice(0,n+i.index+e+o);if(Math.min(n,o)%2){const t=l.slice(1,-1);return{type:"em",raw:l,text:t,tokens:this.lexer.inlineTokens(t)}}const u=l.slice(2,-2);return{type:"strong",raw:l,text:u,tokens:this.lexer.inlineTokens(u)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," ");const n=this.rules.other.nonSpaceChar.test(t),i=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return n&&i&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let t,n;return"@"===e[2]?(t=e[1],n="mailto:"+t):(t=e[1],n=t),{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let t,n;if("@"===e[2])t=e[0],n="mailto:"+t;else{let i;do{i=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??""}while(i!==e[0]);t=e[0],n="www."===e[1]?"http://"+e[0]:e[0]}return{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}}class zu{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Nl,this.options.tokenizer=this.options.tokenizer||new Cu,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={other:Ml,block:bu.normal,inline:_u.normal};this.options.pedantic?(e.block=bu.pedantic,e.inline=_u.pedantic):this.options.gfm&&(e.block=bu.gfm,this.options.breaks?e.inline=_u.breaks:e.inline=_u.gfm),this.tokenizer.rules=e}static get rules(){return{block:bu,inline:_u}}static lex(t,e){return new zu(e).lex(t)}static lexInline(t,e){return new zu(e).inlineTokens(t)}lex(t){t=t.replace(Ml.carriageReturn,"\n"),this.blockTokens(t,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],n=!1){for(this.options.pedantic&&(t=t.replace(Ml.tabCharGlobal,"    ").replace(Ml.spaceLine,""));t;){let i;if(this.options.extensions?.block?.some((n=>!!(i=n.call({lexer:this},t,e))&&(t=t.substring(i.raw.length),e.push(i),!0))))continue;if(i=this.tokenizer.space(t)){t=t.substring(i.raw.length);const n=e.at(-1);1===i.raw.length&&void 0!==n?n.raw+="\n":e.push(i);continue}if(i=this.tokenizer.code(t)){t=t.substring(i.raw.length);const n=e.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.at(-1).src=n.text):e.push(i);continue}if(i=this.tokenizer.fences(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.heading(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.hr(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.blockquote(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.list(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.html(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.def(t)){t=t.substring(i.raw.length);const n=e.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+="\n"+i.raw,n.text+="\n"+i.raw,this.inlineQueue.at(-1).src=n.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.lheading(t)){t=t.substring(i.raw.length),e.push(i);continue}let r=t;if(this.options.extensions?.startBlock){let e=1/0;const n=t.slice(1);let i;this.options.extensions.startBlock.forEach((t=>{i=t.call({lexer:this},n),"number"==typeof i&&i>=0&&(e=Math.min(e,i))})),e<1/0&&e>=0&&(r=t.substring(0,e+1))}if(this.state.top&&(i=this.tokenizer.paragraph(r))){const o=e.at(-1);n&&"paragraph"===o?.type?(o.raw+="\n"+i.raw,o.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):e.push(i),n=r.length!==t.length,t=t.substring(i.raw.length)}else if(i=this.tokenizer.text(t)){t=t.substring(i.raw.length);const n=e.at(-1);"text"===n?.type?(n.raw+="\n"+i.raw,n.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=n.text):e.push(i)}else if(t){const e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let n=t,i=null;if(this.tokens.links){const t=Object.keys(this.tokens.links);if(t.length>0)for(;null!=(i=this.tokenizer.rules.inline.reflinkSearch.exec(n));)t.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(i=this.tokenizer.rules.inline.blockSkip.exec(n));)n=n.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(i=this.tokenizer.rules.inline.anyPunctuation.exec(n));)n=n.slice(0,i.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let r=!1,o="";for(;t;){let i;if(r||(o=""),r=!1,this.options.extensions?.inline?.some((n=>!!(i=n.call({lexer:this},t,e))&&(t=t.substring(i.raw.length),e.push(i),!0))))continue;if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length);const n=e.at(-1);"text"===i.type&&"text"===n?.type?(n.raw+=i.raw,n.text+=i.text):e.push(i);continue}if(i=this.tokenizer.emStrong(t,n,o)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.autolink(t)){t=t.substring(i.raw.length),e.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t))){t=t.substring(i.raw.length),e.push(i);continue}let s=t;if(this.options.extensions?.startInline){let e=1/0;const n=t.slice(1);let i;this.options.extensions.startInline.forEach((t=>{i=t.call({lexer:this},n),"number"==typeof i&&i>=0&&(e=Math.min(e,i))})),e<1/0&&e>=0&&(s=t.substring(0,e+1))}if(i=this.tokenizer.inlineText(s)){t=t.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(o=i.raw.slice(-1)),r=!0;const n=e.at(-1);"text"===n?.type?(n.raw+=i.raw,n.text+=i.text):e.push(i)}else if(t){const e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}return e}}class Mu{options;parser;constructor(t){this.options=t||Nl}space(t){return""}code({text:t,lang:e,escaped:n}){const i=(e||"").match(Ml.notSpaceStart)?.[0],r=t.replace(Ml.endingNewline,"")+"\n";return i?'<pre><code class="language-'+Tu(i)+'">'+(n?r:Tu(r,!0))+"</code></pre>\n":"<pre><code>"+(n?r:Tu(r,!0))+"</code></pre>\n"}blockquote({tokens:t}){return`<blockquote>\n${this.parser.parse(t)}</blockquote>\n`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>\n`}hr(t){return"<hr>\n"}list(t){const e=t.ordered,n=t.start;let i="";for(let e=0;e<t.items.length;e++){const n=t.items[e];i+=this.listitem(n)}const r=e?"ol":"ul";return"<"+r+(e&&1!==n?' start="'+n+'"':"")+">\n"+i+"</"+r+">\n"}listitem(t){let e="";if(t.task){const n=this.checkbox({checked:!!t.checked});t.loose?"paragraph"===t.tokens[0]?.type?(t.tokens[0].text=n+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&"text"===t.tokens[0].tokens[0].type&&(t.tokens[0].tokens[0].text=n+" "+Tu(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):e+=n+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>\n`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>\n`}table(t){let e="",n="";for(let e=0;e<t.header.length;e++)n+=this.tablecell(t.header[e]);e+=this.tablerow({text:n});let i="";for(let e=0;e<t.rows.length;e++){const r=t.rows[e];n="";for(let t=0;t<r.length;t++)n+=this.tablecell(r[t]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+i+"</table>\n"}tablerow({text:t}){return`<tr>\n${t}</tr>\n`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>\n`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Tu(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const i=this.parser.parseInline(n),r=Au(t);if(null===r)return i;let o='<a href="'+(t=r)+'"';return e&&(o+=' title="'+Tu(e)+'"'),o+=">"+i+"</a>",o}image({href:t,title:e,text:n}){const i=Au(t);if(null===i)return Tu(n);let r=`<img src="${t=i}" alt="${n}"`;return e&&(r+=` title="${Tu(e)}"`),r+=">",r}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Tu(t.text)}}class $u{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}}class Du{options;renderer;textRenderer;constructor(t){this.options=t||Nl,this.options.renderer=this.options.renderer||new Mu,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new $u}static parse(t,e){return new Du(e).parse(t)}static parseInline(t,e){return new Du(e).parseInline(t)}parse(t,e=!0){let n="";for(let i=0;i<t.length;i++){const r=t[i];if(this.options.extensions?.renderers?.[r.type]){const t=r,e=this.options.extensions.renderers[t.type].call({parser:this},t);if(!1!==e||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(t.type)){n+=e||"";continue}}const o=r;switch(o.type){case"space":n+=this.renderer.space(o);continue;case"hr":n+=this.renderer.hr(o);continue;case"heading":n+=this.renderer.heading(o);continue;case"code":n+=this.renderer.code(o);continue;case"table":n+=this.renderer.table(o);continue;case"blockquote":n+=this.renderer.blockquote(o);continue;case"list":n+=this.renderer.list(o);continue;case"html":n+=this.renderer.html(o);continue;case"paragraph":n+=this.renderer.paragraph(o);continue;case"text":{let r=o,s=this.renderer.text(r);for(;i+1<t.length&&"text"===t[i+1].type;)r=t[++i],s+="\n"+this.renderer.text(r);n+=e?this.renderer.paragraph({type:"paragraph",raw:s,text:s,tokens:[{type:"text",raw:s,text:s,escaped:!0}]}):s;continue}default:{const t='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(t),"";throw new Error(t)}}}return n}parseInline(t,e=this.renderer){let n="";for(let i=0;i<t.length;i++){const r=t[i];if(this.options.extensions?.renderers?.[r.type]){const t=this.options.extensions.renderers[r.type].call({parser:this},r);if(!1!==t||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){n+=t||"";continue}}const o=r;switch(o.type){case"escape":case"text":n+=e.text(o);break;case"html":n+=e.html(o);break;case"link":n+=e.link(o);break;case"image":n+=e.image(o);break;case"strong":n+=e.strong(o);break;case"em":n+=e.em(o);break;case"codespan":n+=e.codespan(o);break;case"br":n+=e.br(o);break;case"del":n+=e.del(o);break;default:{const t='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(t),"";throw new Error(t)}}}return n}}class Pu{options;block;constructor(t){this.options=t||Nl}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?zu.lex:zu.lexInline}provideParser(){return this.block?Du.parse:Du.parseInline}}const Ou=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Du;Renderer=Mu;TextRenderer=$u;Lexer=zu;Tokenizer=Cu;Hooks=Pu;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(const i of t)switch(n=n.concat(e.call(this,i)),i.type){case"table":{const t=i;for(const i of t.header)n=n.concat(this.walkTokens(i.tokens,e));for(const i of t.rows)for(const t of i)n=n.concat(this.walkTokens(t.tokens,e));break}case"list":{const t=i;n=n.concat(this.walkTokens(t.items,e));break}default:{const t=i;this.defaults.extensions?.childTokens?.[t.type]?this.defaults.extensions.childTokens[t.type].forEach((i=>{const r=t[i].flat(1/0);n=n.concat(this.walkTokens(r,e))})):t.tokens&&(n=n.concat(this.walkTokens(t.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach((t=>{const n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach((t=>{if(!t.name)throw new Error("extension name required");if("renderer"in t){const n=e.renderers[t.name];e.renderers[t.name]=n?function(...e){let i=t.renderer.apply(this,e);return!1===i&&(i=n.apply(this,e)),i}:t.renderer}if("tokenizer"in t){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");const n=e[t.level];n?n.unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&("block"===t.level?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:"inline"===t.level&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}"childTokens"in t&&t.childTokens&&(e.childTokens[t.name]=t.childTokens)})),n.extensions=e),t.renderer){const e=this.defaults.renderer||new Mu(this.defaults);for(const n in t.renderer){if(!(n in e))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const i=n,r=t.renderer[i],o=e[i];e[i]=(...t)=>{let n=r.apply(e,t);return!1===n&&(n=o.apply(e,t)),n||""}}n.renderer=e}if(t.tokenizer){const e=this.defaults.tokenizer||new Cu(this.defaults);for(const n in t.tokenizer){if(!(n in e))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const i=n,r=t.tokenizer[i],o=e[i];e[i]=(...t)=>{let n=r.apply(e,t);return!1===n&&(n=o.apply(e,t)),n}}n.tokenizer=e}if(t.hooks){const e=this.defaults.hooks||new Pu;for(const n in t.hooks){if(!(n in e))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;const i=n,r=t.hooks[i],o=e[i];Pu.passThroughHooks.has(n)?e[i]=t=>{if(this.defaults.async)return Promise.resolve(r.call(e,t)).then((t=>o.call(e,t)));const n=r.call(e,t);return o.call(e,n)}:e[i]=(...t)=>{let n=r.apply(e,t);return!1===n&&(n=o.apply(e,t)),n}}n.hooks=e}if(t.walkTokens){const e=this.defaults.walkTokens,i=t.walkTokens;n.walkTokens=function(t){let n=[];return n.push(i.call(this,t)),e&&(n=n.concat(e.call(this,t))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return zu.lex(t,e??this.defaults)}parser(t,e){return Du.parse(t,e??this.defaults)}parseMarkdown(t){return(e,n)=>{const i={...n},r={...this.defaults,...i},o=this.onError(!!r.silent,!!r.async);if(!0===this.defaults.async&&!1===i.async)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(null==e)return o(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof e)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));r.hooks&&(r.hooks.options=r,r.hooks.block=t);const s=r.hooks?r.hooks.provideLexer():t?zu.lex:zu.lexInline,a=r.hooks?r.hooks.provideParser():t?Du.parse:Du.parseInline;if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(e):e).then((t=>s(t,r))).then((t=>r.hooks?r.hooks.processAllTokens(t):t)).then((t=>r.walkTokens?Promise.all(this.walkTokens(t,r.walkTokens)).then((()=>t)):t)).then((t=>a(t,r))).then((t=>r.hooks?r.hooks.postprocess(t):t)).catch(o);try{r.hooks&&(e=r.hooks.preprocess(e));let t=s(e,r);r.hooks&&(t=r.hooks.processAllTokens(t)),r.walkTokens&&this.walkTokens(t,r.walkTokens);let n=a(t,r);return r.hooks&&(n=r.hooks.postprocess(n)),n}catch(t){return o(t)}}}onError(t,e){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",t){const t="<p>An error occurred:</p><pre>"+Tu(n.message+"",!0)+"</pre>";return e?Promise.resolve(t):t}if(e)return Promise.reject(n);throw n}}};function Iu(t,e){return Ou.parse(t,e)}Iu.options=Iu.setOptions=function(t){return Ou.setOptions(t),Iu.defaults=Ou.defaults,Rl(Iu.defaults),Iu},Iu.getDefaults=El,Iu.defaults=Nl,Iu.use=function(...t){return Ou.use(...t),Iu.defaults=Ou.defaults,Rl(Iu.defaults),Iu},Iu.walkTokens=function(t,e){return Ou.walkTokens(t,e)},Iu.parseInline=Ou.parseInline,Iu.Parser=Du,Iu.parser=Du.parse,Iu.Renderer=Mu,Iu.TextRenderer=$u,Iu.Lexer=zu,Iu.lexer=zu.lex,Iu.Tokenizer=Cu,Iu.Hooks=Pu,Iu.parse=Iu,Iu.options,Iu.setOptions,Iu.use,Iu.walkTokens,Iu.parseInline,Du.parse,zu.lex;const Lu=t=>{var e=Fu();ot((()=>Fe(e,De(da)))),_e(t,e)};var Fu=we("<div></div>"),Bu=we("<span> </span>"),Wu=we("<span><!></span>"),qu=we("<!> <!>",1),ju=(t,e,n)=>e(ee(n).id),Hu=we("<button> </button>"),Uu=we("<!> <!>",1),Yu=we("<button><!></button> <!> <!> <!>",1);function Gu(t,e){z(e,!0);const[n,i]=Qe(),r=()=>Ve(sa,"$nodesStore",n),o=()=>Ve(la,"$graphStore",n);let s=K((()=>r().find((t=>t.id===Ve(ua,"$selectedNodeIdStore",n))))),a=K((()=>ee(s)?.neighbors?.reduce?.(((t,e)=>{const n=r().find((t=>t.id===e));return n&&null!=n.name&&t.push({id:n.id,name:n.name}),t}),[])??[]));function l(){ua.set(void 0),o()?.tick?.()}function u(t){ua.set(t),o()?.tick?.()}const h=K((()=>[ha,ee(s)&&ca]));ia(t,{get class(){return ee(h)},vertical:!0,children:(t,e)=>{var n=be(),i=V(n),r=t=>{var e=Yu(),n=V(e);n.__click=l,ba(Z(n),{size:20});var i=Q(n,2);const r=K((()=>[xa]));ia(i,{get class(){return ee(r)},children:(t,e)=>{var n=Bu(),i=Z(n);ot((()=>{Fe(n,De(ma)),ke(i,ee(s)?.name)})),_e(t,n)},$$slots:{default:!0}});var o=Q(i,2),h=t=>{var e=qu(),n=V(e);Lu(n);var i=Q(n,2);const r=K((()=>[va]));ia(i,{get class(){return ee(r)},children:(t,e)=>{var n=Wu();!function(t,e){var n,i=t,r="";st((()=>{r!==(r=e()??"")&&(void 0!==n&&(ht(n),n=void 0),""!==r&&(n=at((()=>{var t=ve(r+"");ye(G(t),t.lastChild),i.before(t)}))))}))}(Z(n),(()=>function(t){return Al.sanitize(Iu.parse(t,{async:!1}))}(ee(s).data.description))),ot((()=>Fe(n,De(pa)))),_e(t,n)},$$slots:{default:!0}}),_e(t,e)};Ee(o,(t=>{ee(s)?.data?.description&&t(h)}));var c=Q(o,2),f=t=>{var e=Uu(),n=V(e);Lu(n);var i=Q(n,2);const r=K((()=>[ya]));ia(i,{get class(){return ee(r)},vertical:!0,gap:12,children:(t,e)=>{var n=be();Ne(V(n),17,(()=>ee(a)),(t=>t.id),((t,e)=>{var n=Hu();n.__click=[ju,u,e];var i=Z(n);ot((()=>{Fe(n,De(ga)),ke(i,ee(e).name)})),_e(t,n)})),_e(t,n)},$$slots:{default:!0}}),_e(t,e)};Ee(c,(t=>{ee(a).length>0&&!ee(s).data?.atom&&t(f)})),ot((()=>Fe(n,De(fa)))),_e(t,e)};Ee(i,(t=>{ee(s)&&t(r)})),_e(t,n)},$$slots:{default:!0}}),M(),i()}function Xu(t){return function(t){return"number"==typeof t&&!Number.isNaN(t)}(t)||function(t){return"string"==typeof t}(t)}function Zu(t){return function(e,n,i){if(!i.context||!e.x||!e.y)return;if(e._visible=!0,e.data?.root){function l(t,e,n,i,r){const o=t-n/2,s=e-i/2,a=new Path2D;return a.moveTo(o+r,s),a.lineTo(o+n-r,s),a.arcTo(o+n,s,o+n,s+r,r),a.lineTo(o+n,s+i-r),a.arcTo(o+n,s+i,o+n-r,s+i,r),a.lineTo(o+r,s+i),a.arcTo(o,s+i,o,s+i-r,r),a.lineTo(o,s+r),a.arcTo(o,s,o+r,s,r),a.closePath(),a}e._radius=t.heightRoot/2;const u=l(e.x,e.y,t.widthRoot,t.heightRoot,t.radiusRoot);i.context.globalAlpha=1,i.context.lineWidth=.1,i.context.fillStyle="#efefef",i.context.fill(u),i.context.strokeStyle="#000000",i.context.stroke(u),i.context.beginPath();const h=["",""];return i.context.font=`${t.textSizeRoot}px Nunito`,i.context.textAlign="center",i.context.textBaseline="middle",i.context.fillStyle="#000000",h.forEach(((n,r)=>{i.context&&null!=e.x&&null!=e.y&&i.context.fillText(n,e.x,e.y+t.textGapRoot*r-1.5)})),void i.context.stroke()}let r=e.data?.atom?i.graphSettings.highlightFadingMin:n.alpha,o=n.radius??i.graphSettings.nodeRadiusInitial;if(i.highlightedNeighbors&&i.highlightedNode&&!i.highlightedNode.data?.root)if(i.highlightedNeighbors.has(e.id)||i.highlightedNode.id==e.id)if(i.graphSettings.highlightOnlyRoot&&(!i.graphSettings.highlightOnlyRoot||i.highlightedNode.id!==e.id)||e.data?.atom){if(e.data?.atom){r=Gs(r,1-r,i.highlightProgress)}}else n.highlightSizing&&(o=Gs(o,i.graphSettings.highlightSizingAdditional,i.highlightProgress));else if(n.highlightFading){const c=i.graphSettings.highlightFadingMin<r?i.graphSettings.highlightFadingMin:r;r=Gs(c,r-c,1-i.highlightProgress)}const s=Ge(ua);s&&((s===e.id||e.neighbors?.includes?.(s))&&(r=1),s===e.id&&(o=(n.radius??i.graphSettings.nodeRadiusInitial)+i.graphSettings.highlightSizingAdditional));const a=Fs({radiusFlexible:i.graphSettings.nodeRadiusFlexible,radiusInitial:o,radiusCoefficient:i.graphSettings.nodeRadiusCoefficient,radiusFactor:i.graphSettings.nodeRadiusFactor,linkCount:e.linkCount});e._radius=a,i.context.beginPath(),i.context.globalAlpha=r,i.context.lineWidth=n.borderWidth,i.context.strokeStyle=n.borderColor,i.context.fillStyle=n.color,i.context.arc(e.x,e.y,a,0,2*Math.PI),i.context.fill(),i.context.stroke()}}function Vu(t){return function(e,n,i){if(e.data?.root)return;if(e.data?.atom&&i.highlightedNode?.id!==e.id&&e.id!==t.selectedId)return;let r=e.data?.atom?0:n.textAlpha,o=n.textSize,s=n.textShiftX,a=n.textShiftY,l=n.textWeight,u=n.textWidth;if(i.highlightedNeighbors&&i.highlightedNode&&!i.highlightedNode.data?.root)if(i.highlightedNeighbors.has(e.id)||i.highlightedNode.id==e.id)if(i.graphSettings.highlightOnlyRoot&&(!i.graphSettings.highlightOnlyRoot||i.highlightedNode.id!==e.id)||e.data?.atom){if(e.data?.atom){r=Gs(r,1-r,i.highlightProgress)}}else n.highlightTextSizing&&(o=Gs(o,i.graphSettings.highlightTextSizingAdditional,i.highlightProgress),s=Gs(s,i.graphSettings.highlightTextShiftXAdditional,i.highlightProgress),a=Gs(a,i.graphSettings.highlightTextShiftYAdditional,i.highlightProgress),l=Gs(l,i.graphSettings.highlightTextWeightAdditional,i.highlightProgress),u=Gs(u,i.graphSettings.highlightTextWidthAdditional,i.highlightProgress));else if(n.highlightTextFading&&!e.data?.atom){const t=i.graphSettings.highlightTextFadingMin<r?i.graphSettings.highlightTextFadingMin:r;r=Gs(t,r-t,1-i.highlightProgress)}const h=Ge(ua);if(h&&((h===e.id||e.neighbors?.includes?.(h))&&(r=1),h!==e.id||e.data?.atom||(o=n.textSize+i.graphSettings.highlightTextSizingAdditional,s=n.textShiftX+i.graphSettings.highlightTextShiftXAdditional,a=n.textShiftY+i.graphSettings.highlightTextShiftYAdditional,l=n.textWeight+i.graphSettings.highlightTextWeightAdditional,u=n.textWidth+i.graphSettings.highlightTextWidthAdditional)),r>1&&(r=1),r<0&&(r=0),n.textVisible&&n.text){if(!(i.context&&e.x&&e.y&&n.text))return;i.context.beginPath(),i.context.globalAlpha=r,e.data?.atom&&(o+=t.atomAdditionalSize,a+=t.atomAdditionalShiftY),Us({id:e.id,cachedNodeText:i.cachedNodeText,context:i.context,text:n.text,textAlign:n.textAlign,textColor:n.textColor,textFont:n.textFont,textSize:o,x:e.x+s,y:e.y+(e._radius??0)+a,maxWidth:u,textStyle:n.textStyle,textWeight:l,textGap:n.textGap}),i.context.stroke()}}}me(["click"]);var Qu=we("<!> <!>",1);function Ku(t,e){z(e,!0);const[n,i]=Qe(),r=()=>Ve(la,"$graphStore",n);let o=D(void 0),s=K((()=>{const{links:t,nodes:e}=function(t,e){const n={},i=t.find((t=>t.data?.root))?.id,r=e.map((t=>{const e="object"==typeof t.source&&"id"in t.source?t.source.id:t.source,r="object"==typeof t.target&&"id"in t.target?t.target.id:t.target;return e!==i&&r!==i&&Xu(e)&&Xu(r)&&(n[e.toString()]||(n[e.toString()]=[]),n[e.toString()].push(r.toString()),n[r.toString()]||(n[r.toString()]=[]),n[r.toString()].push(e.toString())),t}));return{nodes:t.map((t=>{const e=n[t.id.toString()]??[];return t.data?.root&&(t.drag=!1,t.fx=.1,t.fy=.1),t.neighbors=e,t.linkCount=e.length,t})),links:r}}(Ve(sa,"$nodesStore",n),Ve(aa,"$linksStore",n));return[e,t]})),a=K((()=>ee(s)[0])),l=K((()=>ee(s)[1]));function u(t,e){e&&!e.data?.root?(ua.set(e.id),r()?.tick?.()):(ua.set(void 0),r()?.tick?.())}it((()=>{ee(a),ee(l);let t=ne((()=>r()));if(console.log("update"),t){const{links:e,nodes:n}=t.getData(),i=e.length===ee(l).length&&ee(a).length===n.length?0:.3;t.changeData({links:ee(l),nodes:ee(a)},i)}})),it((()=>{let t=ne((()=>r()));if(console.log("init"),ee(o)&&!t){const{width:i,height:r}=ee(o).getBoundingClientRect();t=new Vs({links:ne((()=>ee(l))),nodes:ne((()=>ee(a))),root:ee(o),nodeSettings:{options:(n={atomAdditionalShiftY:-1,atomAdditionalSize:-1,textWeight:500,textGap:1,textWidth:20,textSize:4,textShiftY:3.5,heightRoot:15,radiusRoot:5,widthRoot:35,textSizeRoot:4,textGapRoot:4},t=>{const e=Ge(ua);return{borderColor:e&&e===t.id?"#ce7a1c":"transparent",borderWidth:(e&&t.id,.5),highlightColor:!1,highlightFading:!0,color:"#21252D",radius:1.5,textFont:"Nunito",textWeight:n.textWeight,textGap:n.textGap,textWidth:n.textWidth,textSize:n.textSize,textShiftY:n.textShiftY,nodeDraw:Zu({heightRoot:n.heightRoot,radiusRoot:n.radiusRoot,textSizeRoot:n.textSizeRoot,widthRoot:n.widthRoot,textGapRoot:n.textGapRoot}),textDraw:Vu({...n,selectedId:e})}})},linkSettings:{particles:!0,options:(e=!0,function(){return{color:"#BBBBBB",arrowColor:"#BBBBBB",particleColor:"#BBBBBB",width:.2,arrow:e}})},graphSettings:{highlightByHover:!0,zoomExtent:[3,5],zoomInitial:{k:3,x:i/3,y:r/2},translateExtentEnable:!0,translateExtentCoefficient:[.35,.3],nodeRadiusCoefficient:19,nodeRadiusFactor:2.9,highlightLinkFadingMin:.4},forceSettings:{collideStrength:.5,centerStrength:0,collideAdditionalRadius:5,linkDistance:35,xForce:.53,xStrength:.08,yForce:.81,yStrength:.27,linkStrength:1,chargeStrength:-67,collideOn:!0},listeners:{onClick:ne((()=>u)),onDoubleClick:()=>{console.log(t?.getData?.())}}}),la.set(t)}var e,n;return()=>{t&&(t.destroy(),t=void 0,la.set(void 0))}})),ia(t,{get class(){return ra},wide:!0,full:!0,children:(t,e)=>{var n=Qu(),i=V(n);ia(i,{get class(){return oa},wide:!0,full:!0,get instance(){return ee(o)},set instance(t){O(o,B(t))}}),Gu(Q(i,2),{}),_e(t,n)},$$slots:{default:!0}}),M(),i()}function Ju(t,e,n){sa.set(e),aa.set(n),Se(Ku,{target:t})}window.mountGraph=Ju;export{Ju as mountGraph};
//# sourceMappingURL=index.js.map
